/*****************************************************************
         * Define symbols for each class break.
         *****************************************************************/
		 fields_A1 = "($feature.a1_c_0,$feature.a1_c_1,$feature.a1_c_2,$feature.a1_c_3)";
		 fields_A2 = "($feature.a2_c_0,$feature.a2_c_1,$feature.a2_c_2,$feature.a2_c_3)";
		 fields_A3 = "($feature.a3_c_0,$feature.a3_c_1,$feature.a3_c_2,$feature.a3_c_3)";
		 fields_B = "($feature.b1_c_0,$feature.b1_c_1,$feature.b1_c_2,$feature.b1_c_3)";
		 fields_C = "($feature.c1_c_0,$feature.c1_c_1,$feature.c1_c_2,$feature.c1_c_3)";
		 fields_D = "($feature.d1_c_0,$feature.d1_c_1,$feature.d1_c_2,$feature.d1_c_3)";
		 fields_E1A = "($feature.e1a_c_0,$feature.e1a_c_1,$feature.e1a_c_2,$feature.e1a_c_3)";
		 fields_E1B = "($feature.e1b_c_0,$feature.e1b_c_1,$feature.e1b_c_2,$feature.e1b_c_3)";
		 fields_E1C = "($feature.e1c_c_0,$feature.e1c_c_1,$feature.e1c_c_2,$feature.e1c_c_3)";
		 fields_F = "($feature.f1_c_0,$feature.f1_c_1,$feature.f1_c_2,$feature.f1_c_3)";
		 indicador_A1 =0;
		 indicador_A2 =0;
		 indicador_A3 =0;
		 indicador_B = 0;
		 indicador_C = 0;
		 indicador_D = 0
		 indicador_E1A = 0;
		 indicador_E1B = 0;
		 indicador_E1C = 0;
		 indicador_F = 0;

        cat1 = {
          type: "simple-fill", 
          color: [252,233,106, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };

        cat2 = {
          type: "simple-fill", 
          color: [250,209,85, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };

        cat3 = {
          type: "simple-fill", 
          color: [247,190,67, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };

         cat4 = {
          type: "simple-fill", 
          color: [242,167,46, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
         cat5 = {
          type: "simple-fill", 
          color: [207,122,31, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
         cat6 = {
          type: "simple-fill", 
          color: [173,83,19, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
        cat7 = {
          type: "simple-fill", 
          color: [138,46,10, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
        cat8 = {
          type: "simple-fill", 
          color: [107,0,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };       
        
		
		dif1 = {
          type: "simple-fill", 
          color: [255,34,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };

        dif2 = {
          type: "simple-fill", 
          color: [255,85,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };

        dif3 = {
          type: "simple-fill", 
          color: [255,128,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };

         dif4 = {
          type: "simple-fill", 
          color: [255,162,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
         dif5 = {
          type: "simple-fill", 
          color: [255,200,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
         dif6 = {
          type: "simple-fill", 
          color: [255,238,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
        dif7 = {
          type: "simple-fill", 
          color: [255,255,255, 0],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
        dif8 = {
          type: "simple-fill", 
          color: [183,219,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		
		dif9 = {
          type: "simple-fill", 
          color: [164,196,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		
		dif10 = {
          type: "simple-fill", 
          color: [122,171,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		
		dif11 = {
          type: "simple-fill", 
          color: [85,145,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		
		dif12 = {
          type: "simple-fill", 
          color: [48,120,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		dif13 = {
          type: "simple-fill", 
          color: [0,97,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		dif14 = {
          type: "simple-fill", 
          color: [0,97,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		
		dif15 = {
          type: "simple-fill", 
          color: [0,97,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 

        renderer_A1= {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "a1_c_0",
          legendOptions: {
            title: "Eficiència energètica (EFEROI)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
		  
            {
              minValue: 7, maxValue: 15,symbol: cat8,label: ">7 "
            },
            {
              minValue: 6.0001,maxValue: 7,symbol: cat7,label: "6 - 7"
            },
            {
              minValue:5.0001, maxValue: 6,symbol: cat6,label: "5 - 6"
            },
            {
              minValue: 4.0001, maxValue: 5,symbol: cat5,label: "4 - 5"
            },
            {
              minValue: 3.0001,maxValue: 4, symbol: cat4,label: "3 - 4"
            },
            {
              minValue: 2.0001, maxValue: 3,symbol: cat3, label: "2 - 3"
            },
            {
              minValue: 1.00001, maxValue: 2, symbol: cat2, label: "1 - 2"
            },
            {
              minValue: 0.000001, maxValue: 1, symbol: cat1, label: "0 - 1 "
            }
            
          ]
        };
        
        renderer_A2= {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "a2_c_0",
          legendOptions: {
            title: "Consum d'aigua"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
		  
            {
              minValue: 500, maxValue: 1000,symbol: cat8,label: ">500 "
            },
            {
              minValue: 450.0001,maxValue: 500,symbol: cat7,label: "450 - 500"
            },
            {
              minValue:400.0001, maxValue: 450,symbol: cat6,label: "400 - 450"
            },
            {
              minValue: 350.0001, maxValue: 400,symbol: cat5,label: "350 - 400"
            },
            {
              minValue: 300.0001,maxValue: 350, symbol: cat4,label: "300 - 350"
            },
            {
              minValue: 250.0001, maxValue: 300,symbol: cat3, label: "250 - 300"
            },
            {
              minValue: 200.00001, maxValue: 250, symbol: cat2, label: "200 - 250"
            },
            {
              minValue: 150.000001, maxValue: 200, symbol: cat1, label: "150 - 200 "
            }
            
          ]
        };
        
        renderer_A3= {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "a3_c_0",
          legendOptions: {
            title: "Apropiació de la producció primària neta"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
		  
            {
              minValue: 7, maxValue: 15,symbol: cat8,label: ">7 "
            },
            {
              minValue: 6.0001,maxValue: 7,symbol: cat7,label: "6 - 7"
            },
            {
              minValue:5.0001, maxValue: 6,symbol: cat6,label: "5 - 6"
            },
            {
              minValue: 4.0001, maxValue: 5,symbol: cat5,label: "4 - 5"
            },
            {
              minValue: 3.0001,maxValue: 4, symbol: cat4,label: "3 - 4"
            },
            {
              minValue: 2.0001, maxValue: 3,symbol: cat3, label: "2 - 3"
            },
            {
              minValue: 1.00001, maxValue: 2, symbol: cat2, label: "1 - 2"
            },
            {
              minValue: 1.000001, maxValue: 1, symbol: cat1, label: "0 - 1 "
            }
            
          ]
        };
		
		renderer_B = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "b1_c_0",
          legendOptions: {
            title: "Integració energia-paisatge (ELIA)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
            {
              minValue: 0.70001, maxValue: 1,symbol: cat8,label: "> 0.7 "
            },
            {
              minValue: 0.60001,maxValue: 0.7,symbol: cat7,label: "0.6 - 0.7 "
            },
            {
              minValue: 0.5001, maxValue: 0.6,symbol: cat6,label: "0.5 - 0.6 "
            },
            {
              minValue: 0.40001, maxValue: 0.5,symbol: cat5,label: "0.4 - 0.5 "
            },
            {
              minValue: 0.30001,maxValue: 0.4, symbol: cat4,label: "0.3 - 0.4 "
            },
            {
              minValue: 0.20001, maxValue: 0.3,symbol: cat3, label: "0.2 - 0.3 "
            },
            {
              minValue: 0.100001, maxValue: 0.2, symbol: cat2, label: "0.1 - 0.2 "
            },
			{
              minValue: 0.05001, maxValue: 0.1, symbol: cat1, label: "0.05 - 0.1 "
            }
            
            
          ]
        };
		
		renderer_C = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "c1_c_0",
          legendOptions: {
            title: "Complexitat paisatgística (Le)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 0.60001,maxValue: 0.8,symbol: cat7,label: "> 0.60 "
            },
            {
              minValue: 0.5001, maxValue: 0.6,symbol: cat6,label: "0.5 - 0.6 "
            },
            {
              minValue: 0.40001, maxValue: 0.5,symbol: cat5,label: "0.4 - 0.5 "
            },
            {
              minValue: 0.30001,maxValue: 0.4, symbol: cat4,label: "0.3 - 0.4 "
            },
            {
              minValue: 0.20001, maxValue: 0.3,symbol: cat3, label: "0.2 - 0.3 "
            },
            {
              minValue: 0.100001, maxValue: 0.2, symbol: cat2, label: "0.1 - 0.2 "
            },
            {
              minValue: 0.05001, maxValue: 0.1, symbol: cat1, label: "0.05 - 0.1 "
            }
            
            
          ]
        };
		
		renderer_D = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "d1_c_0",
          legendOptions: {
            title: "Emissions de gasos d'efecte hivernacle (MJ)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 0.60001,maxValue: 0.8,symbol: cat7,label: "> 0.60 "
            },
            {
              minValue: 0.5001, maxValue: 0.6,symbol: cat6,label: "0.5 - 0.6 "
            },
            {
              minValue: 0.40001, maxValue: 0.5,symbol: cat5,label: "0.4 - 0.5 "
            },
            {
              minValue: 0.30001,maxValue: 0.4, symbol: cat4,label: "0.3 - 0.4 "
            },
            {
              minValue: 0.20001, maxValue: 0.3,symbol: cat3, label: "0.2 - 0.3 "
            },
            {
              minValue: 0.100001, maxValue: 0.2, symbol: cat2, label: "0.1 - 0.2 "
            },
            {
              minValue: 0.05001, maxValue: 0.1, symbol: cat1, label: "0.05 - 0.1 "
            }
          ]
        };
		
		renderer_E1A = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "e1a_c_0",
          legendOptions: {
            title: "Recirculació de nutrients (% rP)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
            {
              minValue: 87.501,maxValue: 105,symbol: cat8,label: "87.5 - 100"
            },
            {
              minValue: 75.001,maxValue: 87.5,symbol: cat7,label: "75 - 87.5"
            },
            {
              minValue: 62.501, maxValue: 75,symbol: cat6,label: "62.5 - 75"
            },
            {
              minValue: 50.001, maxValue: 62.5,symbol: cat5,label: "50 - 62.5"
            },
            {
              minValue: 37.501,maxValue: 50, symbol: cat4,label: "37.5 - 50"
            },
            {
              minValue: 25.001, maxValue: 37.5,symbol: cat3, label: "25 - 37.5"
            },
            {
              minValue: 12.501, maxValue: 25, symbol: cat2, label: "12.5 - 25 "
            },
            {
              minValue: 0.5001, maxValue: 12.5, symbol: cat1, label: "0 - 12.5"
            }
            
          ]
        };
		
		renderer_E1B = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "e1b_c_0",
          legendOptions: {
            title: "Embornal de carboni (t C)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 3000.001,maxValue: 6000,symbol: cat7,label: "> 3000 "
            },
            {
              minValue: 2500.001, maxValue: 3000,symbol: cat6,label: "2500 - 3000 "
            },
            {
              minValue: 2000.001, maxValue: 2500,symbol: cat5,label: "2000 - 2500  "
            },
            {
              minValue: 1500.001,maxValue: 2000, symbol: cat4,label: "1500 - 2000 "
            },
            {
              minValue: 1000.001, maxValue: 1500,symbol: cat3, label: "1000 - 1500 "
            },
            {
              minValue: 500.001, maxValue: 1000, symbol: cat2, label: "500 - 1000 "
            },
            {
              minValue: 0.5001, maxValue: 500, symbol: cat1, label: "0 - 500 "
            }
          ]
        };
		
		renderer_E1C = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "e1c_c_0",
          legendOptions: {
            title: "Producció d'aliments (kg ms)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 8000.001,maxValue: 15000,symbol: cat7,label: "> 8000"
            },
            {
              minValue: 4000.001, maxValue: 8000,symbol: cat6,label: "4000 - 8000"
            },
            {
              minValue: 2000.001, maxValue: 4000,symbol: cat5,label: "2000 - 4000"
            },
            {
              minValue: 1000.001,maxValue: 2000, symbol: cat4,label: "1000 - 2000"
            },
            {
              minValue: 500.001, maxValue: 1000,symbol: cat3, label: "500 - 1000"
            },
            {
              minValue: 250.001, maxValue: 500, symbol: cat2, label: "250 - 500"
            },
            {
              minValue: 0.0001, maxValue: 250, symbol: cat1, label: "0 - 250"
            } 
          ]
        };
		
		renderer_F = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "f1_c_0",
          legendOptions: {
            title: "Llocs de treball (UTA)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            color: "white",
            style: "none",
            outline: {
              width: 0,
              color: [50, 50, 50, 0.6]
            }
          },
          defaultLabel: "no data",
          classBreakInfos: [
			{
              minValue: 6.4,maxValue: 12,symbol: cat7,label: "> 6.4 "
            },
            {
              minValue: 3.2001,maxValue: 6.4,symbol: cat7,label: "3.2 - 6.4 "
            },
            {
              minValue: 1.6001, maxValue: 3.2,symbol: cat6,label: "1.6 - 3.2 "
            },
            {
              minValue: 0.8001, maxValue: 1.6,symbol: cat5,label: "0.8 - 1.6 "
            },
            {
              minValue: 0.4001,maxValue: 0.8, symbol: cat4,label: "0.4 - 0.8 "
            },
            {
              minValue: 0.2001, maxValue: 0.4,symbol: cat3, label: "0.2 - 0.4 "
            },
            {
              minValue: 0.1001, maxValue: 0.2, symbol: cat2, label: "0.1 - 0.2 "
            },
            {
              minValue: 0.0101, maxValue: 0.1, symbol: cat1, label: "0 - 0.1 "
            }
          ]
        };

		
		renderer_dif_A1 = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression:  "Max"+fields_A1+" - $feature.a1_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 6.001,maxValue: 15,symbol: dif12,label: ">6"
            },
			{
              minValue: 4.001,maxValue: 6,symbol: dif11,label: "4 - 6"
            },
			{
              minValue: 2.001,maxValue: 4,symbol: dif10,label: "2 - 4"
            },
			{
              minValue: 1.001,maxValue: 2,symbol: dif9,label: "1 - 2"
            },
			{
              minValue: 0.05001,maxValue: 1,symbol: dif8,label: "0 - 1"
            },
            {
              minValue: -0.4999,maxValue: 0.05,symbol: dif7,label: "0 "
            },
            {
              minValue: -0.999, maxValue: -0.05,symbol: dif6,label: "-1 - 0"
            },
            {
              minValue: -1.999, maxValue: -1,symbol: dif5,label: "-2 - -1"
            },
            {
              minValue: -3.999,maxValue: -2, symbol: dif4,label: "-4 -  -2"
            },
            {
              minValue: -5.999, maxValue: -4,symbol: dif3, label: "-6 - -4"
            },
            {
              minValue: -7.9999, maxValue: -6, symbol: dif2, label: "-8 - -6"
            },
            {
              minValue: -10, maxValue: -8, symbol: dif1, label: "< -8 "
            }
          ]
        };
		renderer_dif_A2 = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression:  "Max"+fields_A2+" - $feature.a2_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
            {
              minValue: 300.001,maxValue: 1000,symbol: dif12,label: ">300"
            },
          	{
              minValue: 250.001,maxValue: 300,symbol: dif11,label: "250 - 300"
            },
			{
              minValue: 200.001,maxValue: 250,symbol: dif10,label: "200 - 250"
            },
			{
              minValue: 150.001,maxValue: 200,symbol: dif9,label: "150 - 200"
            },
			{
              minValue: 100.001,maxValue: 150,symbol: dif8,label: "100 - 150"
            },
			{
              minValue: 50.001,maxValue: 100,symbol: dif7,label: "50 - 100"
            },
			{
              minValue: 0.00001,maxValue: 50,symbol: dif6,label: "0 - 50"
            }
   
          ]
        };
        renderer_dif_A3 = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression:  "Max"+fields_A3+" - $feature.a3_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 6.001,maxValue: 15,symbol: dif12,label: ">6"
            },
			{
              minValue: 4.001,maxValue: 6,symbol: dif11,label: "4 - 6"
            },
			{
              minValue: 2.001,maxValue: 4,symbol: dif10,label: "2 - 4"
            },
			{
              minValue: 1.001,maxValue: 2,symbol: dif9,label: "1 - 2"
            },
			{
              minValue: 0.05001,maxValue: 1,symbol: dif8,label: "0 - 1"
            },
            {
              minValue: -0.4999,maxValue: 0.05,symbol: dif7,label: "0 "
            },
            {
              minValue: -0.999, maxValue: -0.05,symbol: dif6,label: "-1 - 0"
            },
            {
              minValue: -1.999, maxValue: -1,symbol: dif5,label: "-2 - -1"
            },
            {
              minValue: -3.999,maxValue: -2, symbol: dif4,label: "-4 -  -2"
            },
            {
              minValue: -5.999, maxValue: -4,symbol: dif3, label: "-6 - -4"
            },
            {
              minValue: -7.9999, maxValue: -6, symbol: dif2, label: "-8 - -6"
            },
            {
              minValue: -10, maxValue: -8, symbol: dif1, label: "< -8 "
            }
          ]
        };
		renderer_dif_B = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_B+" - $feature.b1_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
		  {
              minValue: 0.5001,maxValue:1,symbol: dif13,label: ">0.5"
            },
			{
              minValue: 0.4001,maxValue: 0.5,symbol: dif12,label: "0.4 - 0.5 "
            },
			{
              minValue: 0.3001,maxValue: 0.4,symbol: dif11,label: "0.3 - 0.4 "
            },
			{
              minValue: 0.2001,maxValue: 0.3,symbol: dif10,label: "0.2 - 0.3 "
            },
			{
              minValue: 0.1001,maxValue: 0.2,symbol: dif9,label: "0.1 - 0.2 "
            },
			{
              minValue: 0.05001,maxValue: 0.1,symbol: dif8,label: "0 - 0.1 "
            },
            {
              minValue: -0.0999,maxValue: 0.02,symbol: dif7,label: "0 "
            },
            {
              minValue: -0.0999, maxValue: -0.1,symbol: dif6,label: "-0.1 - 0"
            },
            {
              minValue: -0.1999, maxValue: -0.1,symbol: dif5,label: "-0.2 - -0.1"
            },
            {
              minValue: -0.2999,maxValue: -0.1, symbol: dif4,label: "-0.3 - 0.2"
            },
            {
              minValue: -0.3999, maxValue: -0.2,symbol: dif3, label: "-0.4 - -0.3"
            },
            {
              minValue: -0.4999, maxValue: -0.4, symbol: dif2, label: "-0.5 - -0.4 "
            },
            {
              minValue: -8, maxValue: -0.5, symbol: dif1, label: "< -0.5"
            }
          ]
        };
		
		renderer_dif_C = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_C+" - $feature.c1_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 0.2001,maxValue: 0.5,symbol: dif13,label: "> 0.2"
            },
			{
              minValue: 0.1001,maxValue: 0.2,symbol: dif11,label: "0.1 - 0.2 "
            },
			{
              minValue: 0.03001,maxValue: 0.1,symbol: dif9,label: "0 - 0.1 "
            },
            {
              minValue: 0.0299,maxValue: 0.03,symbol: dif7,label: "0 "
            },
            {
              minValue: -0.0999, maxValue: -0.03,symbol: dif6,label: "-0.1 - 0"
            },
            {
              minValue: -0.1999, maxValue: -0.1,symbol: dif5,label: "-0.2 - -0.1"
            },
            {
              minValue: -0.2999,maxValue: -0.2, symbol: dif4,label: "-0.3 - 0.2"
            },
            {
              minValue: -0.3999, maxValue: -0.3,symbol: dif2, label: "-0.4 - -0.3"
            },
            {
              minValue: -1, maxValue: -0.4, symbol: dif1, label: "< -0.4"
            }
          ]
        };
		
		
		renderer_dif_D = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_D+" - $feature.d1_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 2400.001,maxValue: 8000,symbol: dif15,label: ">2.400"
            },
			{
              minValue: 2000.001,maxValue: 2400,symbol: dif14,label: "2.000 - 2.400"
            },
			{
              minValue: 1600.001,maxValue: 2000,symbol: dif13,label: "1.600 - 2.000 "
            },
			{
              minValue: 1200.001,maxValue: 1600,symbol: dif12,label: "1.200 - 1.600"
            },
			{
              minValue: 800.001,maxValue: 1200,symbol: dif11,label: "800 - 1.200"
            },
			{
              minValue: 400.001,maxValue: 800,symbol: dif10,label: "400 - 800"
            },
			{
              minValue: 10.001,maxValue: 400,symbol: dif9,label: "0 - 400"
            },
			{
              minValue:-9.99,maxValue: 10,symbol: null,label: "0"
            },
            {
              minValue: -9.999,maxValue: 10, symbol: dif4,label: "-400 - 0"
            },
            {
              minValue: -799.99, maxValue: -400,symbol: dif2, label: "-800 - -400"
            },
            {
              minValue: -5000, maxValue: -800, symbol: dif1, label: "<-800"
            }
          ]
        };
		
		
		renderer_dif_E1A = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_E1A+" - $feature.e1a_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 90.001,maxValue: 100,symbol: dif15,label: "90 - 100"
            },
			{
              minValue: 75.001,maxValue: 90,symbol: dif14,label: "75 - 90"
            },
			{
              minValue: 60.001,maxValue: 75,symbol: dif13,label: "60 - 75"
            },
			{
              minValue: 45.001,maxValue: 60,symbol: dif12,label: "45 - 60"
            },
			{
              minValue: 30.001,maxValue: 45,symbol: dif11,label: "30 - 45"
            },
			{
              minValue: 15.001,maxValue: 30,symbol: dif10,label: "15 - 30"
            },
			{
              minValue: 0.051,maxValue: 15,symbol: dif9,label: "0- 15"
            },
			{
              minValue: -0.049, maxValue: 0.05, symbol: dif8,label: "0"
            },
			{
              minValue: -14.99, maxValue: -0.05, symbol: dif7,label: "-15 - 0"
            },
			{
              minValue: -29.99, maxValue: -15, symbol: dif6,label: "-30 - -15"
            },
			{
              minValue: -44.99, maxValue: -30, symbol: dif5,label: "-45 - -30"
            },
            {
              minValue: -59.99, maxValue: -45, symbol: dif4,label: "-60- -45"
            },
            {
              minValue: -74.999,maxValue: -60, symbol: dif3,label: "-75 - 60"
            },
            {
              minValue: -89.99, maxValue: -75,symbol: dif2, label: "-90 - -75"
            },
            {
              minValue: -5000, maxValue: -90, symbol: dif1, label: "-100 - -90"
            }
          ]
        };
		
		renderer_dif_E1B = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_E1B+" - $feature.e1b_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 250.001,maxValue: 800,symbol: dif9,label: "> 250"
            },
			{
              minValue: 125.001,maxValue: 250,symbol: dif8,label: "125 - 250"
            },
			{
              minValue: 25.001,maxValue: 125,symbol: dif7,label: "0 - 125"
            },
			{
              minValue: -24.999,maxValue: 25,symbol: dif6,label: "0"
            },
			{
              minValue:-124.999,maxValue: -25,symbol: dif5,label: "-125 - 0"
            },
            {
              minValue: -249.99, maxValue: -125, symbol: dif4,label: "-250 - -125"
            },
            {
              minValue: -499.999,maxValue: -250, symbol: dif3,label: "-500 - -250"
            },
            {
              minValue: -999.99, maxValue: -500,symbol: dif2, label: "-1.000 - 500"
            },
            {
              minValue: -1547.99, maxValue: -1000, symbol: dif1, label: "< -1.000"
            }
          ]
        };
		
		renderer_dif_E1C = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_E1C+" - $feature.e1c_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 4000.001,maxValue: 50000,symbol: dif15,label: ">4000"
            },
			{
              minValue: 2000.001,maxValue: 4000,symbol: dif14,label: "20000 - 4000"
            },
			{
              minValue: 1000.001,maxValue: 2000,symbol: dif13,label: "1000 - 2000"
            },
			{
              minValue: 500,maxValue: 1000,symbol: dif12,label: "500 - 1000"
            },
			{
              minValue: 250.001,maxValue: 500,symbol: dif11,label: "250 - 500"
            },
			{
              minValue: 125.001,maxValue: 250,symbol: dif10,label: "125 - 250"
            },
			{
              minValue: 3.001,maxValue: 125,symbol: dif9,label: "0 - 125"
            },
			{
              minValue:-2.99,maxValue: 3,symbol: dif8,label: "0"
            },
			{
              minValue: -124.99,maxValue: -3,symbol: dif7,label: "-125 - 0"
            },
            {
              minValue: -249.99,maxValue: -125,symbol: dif6,label: "-250 - -125"
            },
            {
              minValue: -499.99, maxValue: -250,symbol: dif5,label: "-500 - -250"
            },
            {
              minValue: -999.99, maxValue: -500,symbol: dif4,label: "-1000 - -500"
            },
            {
              minValue: -1999.999,maxValue: -1000, symbol: dif3,label: "-2000 - -1000"
            },
            {
              minValue: -3999.99, maxValue: -2000,symbol: dif2, label: "-4000 - -2000"
            },
            {
              minValue: -38114, maxValue: -4000, symbol: dif1, label: "<-4000"
            }
          ]
        };
		
		renderer_dif_F = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_F+" - $feature.f1_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 12.8001,maxValue: 17,symbol: dif15,label: ">12.8"
            },
			{
              minValue: 6.4001,maxValue: 12.8,symbol: dif14,label: "6.4 - 12.8"
            },
			{
              minValue: 3.2001,maxValue: 6.4,symbol: dif13,label: "3.2 - 6.4"
            },
			{
              minValue: 1.6001,maxValue: 3.2,symbol: dif12,label: "1.6 - 3.2"
            },
			{
              minValue: 0.8001,maxValue: 1.6,symbol: dif11,label: "0.8 - 1.6"
            },
			{
              minValue: 0.4001,maxValue: 0.8,symbol: dif10,label: "0.4 - 0.8"
            },
			{
              minValue: 0.2001,maxValue: 0.4,symbol: dif9,label: "0.2 - 0.4"
            },
			{
              minValue:0.001,maxValue: 0.2,symbol: dif8,label: "0 - 0.2"
            },
			{
              minValue: -0.0099,maxValue: 0.010,symbol: dif7,label: "0"
            },
            {
              minValue: -0.199,maxValue: -0.010,symbol: dif6,label: "-0.2 - 0"
            },
            {
              minValue: -0.399, maxValue: -0.2,symbol: dif5,label: "-0.4 - -0.2"
            },
            {
              minValue: -0.7999, maxValue: -0.4,symbol: dif4,label: "-0.8 - -0.4"
            },
            {
              minValue: -1.9999,maxValue: -0.8, symbol: dif3,label: "-1.6 - -0.8"
            },
            {
              minValue: -3.9999, maxValue: -1.6,symbol: dif2, label: "-3.2 - -1.6"
            },
            {
              minValue: -4.35, maxValue: -3.2, symbol: dif1, label: "<-3.2"
            }
          ]
        };

		 function canvi(indicador,derivat){
			 var e1 = document.getElementById("field-select");
			var text_indicador = e1.options[e1.selectedIndex].text;
			 document.getElementById("titol").innerHTML = "Resultats optimitzant la dimensió: " +text_indicador;
			 tipus = document.getElementById("tipus").value;
			escenari = document.getElementById("escenari_id").value;
			indicador_principal = "fields" + document.getElementById("field-select").value;
			var e = document.getElementById("escenari_id");
			var text_escenari = e.options[e.selectedIndex].text;
			document.getElementById("escenariDif").innerHTML = "Diferència escenari " + text_escenari + " i Optimitzat";
			if (derivat) document.getElementById("field-select-ind").value = -1;
			switch (indicador){
			case "A1":
				cat1.color = [252,233,106, 0.7];
				cat2.color = [250,209,85, 0.7];
				cat3.color = [247,190,67, 0.7];
				cat4.color = [242,167,46, 0.7];
				cat5.color = [207,122,31, 0.7];
				cat6.color = [173,83,19, 0.7];
				cat7.color = [138,46,10, 0.7];
				cat8.color = [107,0,0, 0.7];
				dif1.color = [255,34,0, 0.7];
				dif2.color = [255,85,0, 0.7];
				dif3.color = [255,128,0, 0.7];
				dif4.color = [255,162,0, 0.7];
				dif5.color = [255,200,0, 0.7];
				dif6.color = [255,238,0, 0.7];
				dif7.color = [255,255,255, 0];
				dif7.outline.width=0;
				dif8.color = [183,219,0, 0.7];
				dif9.color = [164,196,0, 0.7];
				dif10.color = [122,171,0, 0.7];
				dif11.color = [85,145,0, 0.7];
				dif12.color = [48,120,0, 0.7];
				renderer_A1.field ="a1_c_"+escenari;
				layerEscenari.renderer = renderer_A1;
				renderer_max_A1 = {type: "class-breaks"};
				renderer_max_A1.classBreakInfos = renderer_A1.classBreakInfos;
				if (derivat == true){
					renderer_dif_A1.valueExpression=tipus + fields_A1 + " - $feature.a1_c_"+escenari;
					renderer_max_A1.valueExpression= tipus + fields_A1;
				} else {
					renderer_dif_A1.valueExpression=document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsA1) - " + tipus + fields_A1;
					renderer_max_A1.valueExpression = document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsA1)";
					layer3.renderer = renderer_max_A1;
				}
				layer4.renderer = renderer_dif_A1;
				layer3.renderer = renderer_max_A1;
				document.getElementById("descripcio").value = textA1;
				break;
			case "A2":
				cat1.color = [252,233,106, 0.7];
				cat2.color = [250,209,85, 0.7];
				cat3.color = [247,190,67, 0.7];
				cat4.color = [242,167,46, 0.7];
				cat5.color = [207,122,31, 0.7];
				cat6.color = [173,83,19, 0.7];
				cat7.color = [138,46,10, 0.7];
				cat8.color = [107,0,0, 0.7];
				dif1.color = [255,34,0, 0.7];
				dif2.color = [255,85,0, 0.7];
				dif3.color = [255,128,0, 0.7];
				dif4.color = [255,162,0, 0.7];
				dif5.color = [255,200,0, 0.7];
				dif6.color = [255,238,0, 0.7];
				dif7.color = [255,255,255, 0];
				dif7.outline.width=0;
				dif8.color = [183,219,0, 0.7];
				dif9.color = [164,196,0, 0.7];
				dif10.color = [122,171,0, 0.7];
				dif11.color = [85,145,0, 0.7];
				dif12.color = [48,120,0, 0.7];
				renderer_A2.field ="a2_c_"+escenari;
				layerEscenari.renderer = renderer_A2;
				renderer_max_A2 = {type: "class-breaks"};
				renderer_max_A2.classBreakInfos = renderer_A2.classBreakInfos;
				if (derivat == true){
					renderer_dif_A2.valueExpression=tipus + fields_A2 + " - $feature.a2_c_"+escenari;
					renderer_max_A2.valueExpression= tipus + fields_A2;
				} else {
					renderer_dif_A2.valueExpression=document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsA2) - " + tipus + fields_A2;
					renderer_max_A2.valueExpression = document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsA2)";
					layer3.renderer = renderer_max_A2;
				}
				layer4.renderer = renderer_dif_A2;
				layer3.renderer = renderer_max_A2;
				document.getElementById("descripcio").value = textA1;
				break;
			case "A3":
				cat1.color = [252,233,106, 0.7];
				cat2.color = [250,209,85, 0.7];
				cat3.color = [247,190,67, 0.7];
				cat4.color = [242,167,46, 0.7];
				cat5.color = [207,122,31, 0.7];
				cat6.color = [173,83,19, 0.7];
				cat7.color = [138,46,10, 0.7];
				cat8.color = [107,0,0, 0.7];
				dif1.color = [255,34,0, 0.7];
				dif2.color = [255,85,0, 0.7];
				dif3.color = [255,128,0, 0.7];
				dif4.color = [255,162,0, 0.7];
				dif5.color = [255,200,0, 0.7];
				dif6.color = [255,238,0, 0.7];
				dif7.color = [255,255,255, 0];
				dif7.outline.width=0;
				dif8.color = [183,219,0, 0.7];
				dif9.color = [164,196,0, 0.7];
				dif10.color = [122,171,0, 0.7];
				dif11.color = [85,145,0, 0.7];
				dif12.color = [48,120,0, 0.7];
				renderer_A3.field ="a3_c_"+escenari;
				layerEscenari.renderer = renderer_A3;
				renderer_max_A3 = {type: "class-breaks"};
				renderer_max_A3.classBreakInfos = renderer_A3.classBreakInfos;
				if (derivat == true){
					renderer_dif_A3.valueExpression=tipus + fields_A3 + " - $feature.a3_c_"+escenari;
					renderer_max_A3.valueExpression= tipus + fields_A3;
				} else {
					renderer_dif_A3.valueExpression=document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsA3) - " + tipus + fields_A3;
					renderer_max_A3.valueExpression = document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsA3)";
					layer3.renderer = renderer_max_A3;
				}
				layer4.renderer = renderer_dif_A3;
				layer3.renderer = renderer_max_A3;
				document.getElementById("descripcio").value = textA1;
				break;
			case "B": 
				cat1.color = [204,237,217, 0.7];
				cat2.color = [171,212,185, 0.7];
				cat3.color = [141,186,153, 0.7];
				cat4.color = [118,168,130, 0.7];
				cat5.color = [84,133,94, 0.7];
				cat6.color = [58,105,68, 0.7];
				cat7.color = [38,84,49, 0.7];
				cat8.color = [19,56,28, 0.7];
				dif1.color = [255,34,0, 0.7];
				dif2.color = [255,85,0, 0.7];
				dif3.color = [255,128,0, 0.7];
				dif4.color = [255,162,0, 0.7];
				dif5.color = [255,200,0, 0.7];
				dif6.color = [255,238,0, 0.7];
				dif7.color = [255,255,255, 0];
				dif7.outline.width=0;
				dif8.color = [183,219,0, 0.7];
				dif9.color = [164,196,0, 0.7];
				dif10.color = [122,171,0, 0.7];
				dif11.color = [85,145,0, 0.7];
				dif12.color = [48,120,0, 0.7];
				dif13.color = [0,97,0, 0.7];
				renderer_B.field ="b1_c_"+escenari;
				layerEscenari.renderer = renderer_B;				
				renderer_max_B = {type: "class-breaks"};
				renderer_max_B.classBreakInfos = renderer_B.classBreakInfos;
				if (derivat == true){
					renderer_dif_B.valueExpression= tipus + fields_B + "- $feature.b1_c_"+escenari;
					renderer_max_B.valueExpression= tipus +fields_B;
				} else {
					renderer_dif_B.valueExpression= document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsB) - " + tipus + fields_B;
					renderer_max_B.valueExpression = document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsB)";
				}
				layer4.renderer = renderer_dif_B;
				layer3.renderer = renderer_max_B;
				
				document.getElementById("descripcio").value = textB;
				break;
			case "C": 
				cat1.color = [252,228,104, 0.7];
				cat2.color = [250,205,80, 0.7];
				cat3.color = [245,179,56, 0.7];
				cat4.color = [224,144,38, 0.7];
				cat5.color = [181,94,24, 0.7];
				cat6.color = [145,51,10, 0.7];
				cat7.color = [107,0,0, 0.7];
				dif1.color = [255,34,0, 0.7];
				dif2.color = [255,85,0, 0.7];
				dif4.color = [255,162,0, 0.7];
				dif5.color = [255,200,0, 0.7];
				dif6.color = [255,238,0, 0.7];
				dif7.color = [255,255,255, 0];
				dif7.outline.width=0;
				dif9.color = [164,196,0, 0.7];
				dif11.color = [85,145,0, 0.7];
				dif13.color = [0,97,0, 0.7];
				renderer_C.field ="c1_c_"+escenari;
				layerEscenari.renderer = renderer_C;
				renderer_max_C = {type: "class-breaks"};
				renderer_max_C.classBreakInfos = renderer_C.classBreakInfos;				
				if (derivat == true){
					renderer_dif_C.valueExpression= tipus + fields_C + " - $feature.c1_c_"+escenari;
					renderer_max_C.valueExpression= tipus +fields_C;
				} else {
					renderer_dif_C.valueExpression=document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsC) - " + tipus + fields_C;
					renderer_max_C.valueExpression = document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsC)";
				}
				layer4.renderer = renderer_dif_C;
				layer3.renderer = renderer_max_C;				
				document.getElementById("descripcio").value = textC;
				break;
			case "D": 
				cat1.color = [242,207,182, 0.7];
				cat2.color = [232,179,151, 0.7];
				cat3.color = [222,155,124, 0.7];
				cat4.color = [208,130,98, 0.7];
				cat5.color = [199,108,76, 0.7];
				cat6.color = [184,84,55, 0.7];
				cat7.color = [171,65,36, 0.7];
				dif1.color = [0,97,0, 0.7];
				dif2.color = [43,117,0, 0.7];
				dif4.color = [103,158,0,0.7];
				dif8.color = [255,255,255,0];
				dif8.outline.width=0;
				dif9.color = [255,229,90,0.7];
				dif10.color = [255,200,0,0.7];
				dif11.color = [255,166,0,0.7];
				dif12.color = [255,140,0,0.7];
				dif13.color = [255,111,0,0.7];
				dif14.color = [255,77,0,0.7];
				dif15.color = [255,38,0,0.7];
				renderer_D.field ="d1_c_"+escenari;
				layerEscenari.renderer = renderer_D;
				renderer_max_D = {type: "class-breaks"};
				renderer_max_D.classBreakInfos = renderer_D.classBreakInfos;
				if (derivat == true){
					renderer_dif_D.valueExpression= tipus + fields_D + " - $feature.d1_c_"+escenari;
					renderer_max_D.valueExpression= tipus + fields_D;
				} else {
					renderer_dif_D.valueExpression=document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsD) -" + tipus + fields_D;
					renderer_max_D.valueExpression = document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsD)";
				}
				layer4.renderer = renderer_dif_B;
				layer3.renderer = renderer_max_D;
				document.getElementById("descripcio").value = textD;
				break;
			case "E1A": 
				cat1.color = [149,209,237, 0.7];
				cat2.color = [116,180,232, 0.7];
				cat3.color = [80,155,230, 0.7];
				cat4.color = [31,131,224, 0.7];
				cat5.color = [33,98,204, 0.7];
				cat6.color = [39,68,184, 0.7];
				cat7.color = [23,40,166, 0.7];
				cat8.color = [35,35,145, 0.7];
				dif1.color = [255,38,0,0.7];
				dif2.color = [255,77,0,0.7];
				dif3.color = [255,111,0,0.7];
				dif4.color = [255,140,0,0.7];
				dif5.color = [255,166,0,0.7];
				dif6.color = [255,200,0,0.7];
				dif7.color = [255,229,90,0.7];
				dif8.color = [255,255,255,0];
				dif3.outline.width=0;
				dif9.color = [183,219,0,0.7];
				dif10.color = [153,199,0, 0.7];
				dif11.color = [122,178,0, 0.7];
				dif12.color = [92,158,0, 0.7];
				dif13.color = [61,138,0, 0.7];
				dif14.color = [31,117,0, 0.7];
				dif15.color = [0,97,0, 0.7];
				renderer_E1A.field ="e1a_c_"+escenari;
				layerEscenari.renderer = renderer_E1A;
				renderer_max_E1A = {type: "class-breaks"};
				renderer_max_E1A.classBreakInfos = renderer_E1A.classBreakInfos;
				if (derivat == true){
					renderer_dif_E1A.valueExpression=tipus + fields_E1A + " - $feature.e1a_c_"+escenari;
					renderer_max_E1A.valueExpression= tipus +  fields_E1A;
				} else {
					renderer_dif_E1A.valueExpression=document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsE1A) - " + tipus + fields_E1A;
					renderer_max_E1A.valueExpression = document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsE1A)";
				}
				layer4.renderer = renderer_dif_E1A;
				layer3.renderer = renderer_max_E1A;
				document.getElementById("descripcio").value = textE1A;
				break;
			case "E1B": 
				cat1.color = [147,207,237, 0.7];
				cat2.color = [117,177,232, 0.7];
				cat3.color = [71,150,229, 0.7];
				cat4.color = [32,123,219, 0.7];
				cat5.color = [33,87,197, 0.7];
				cat6.color = [27,56,176, 0.7];
				cat7.color = [16,25,145, 0.7];
				dif1.color = [255,34,0, 0.7];
				dif2.color = [255,84,5, 0.7];
				dif3.color = [255,135,10,0.7];
				dif4.color = [255,185,15,0.7];
				dif5.color = [255,235,20,0.7];
				dif6.color = [255,255,255,0];
				dif6.outline.width=0;
				dif7.color = [164,196,0,0.7];
				dif8.color = [107,161,0,0.7];
				dif9.color = [60,128,0,0.7];
				renderer_E1B.field ="e1b_c_"+escenari;
				layerEscenari.renderer = renderer_E1B;
				renderer_max_E1B = {type: "class-breaks"};
				renderer_max_E1B.classBreakInfos = renderer_E1B.classBreakInfos;
				if (derivat == true){
					renderer_dif_E1B.valueExpression= tipus + fields_E1B + " - $feature.e1b_c_"+escenari;
					renderer_max_E1B.valueExpression= tipus + fields_E1B;
				} else {
					renderer_dif_E1B.valueExpression=document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsE1B) -" + tipus + fields_E1B;
					renderer_max_E1B.valueExpression = document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsE1B)";
				}
				layer4.renderer = renderer_dif_E1B;
				layer3.renderer = renderer_max_E1B;
				document.getElementById("descripcio").value = textE1B;
				break;
			case "E1C": 
				cat1.color = [145,205,237, 0.7];
				cat2.color = [107,174,232, 0.7];
				cat3.color = [61,144,229, 0.7];
				cat4.color = [32,114,214, 0.7];
				cat5.color = [32,76,189, 0.7];
				cat6.color = [25,44,168, 0.7];
				cat7.color = [9,9,145, 0.7];
				dif1.color = [0,97,0, 0.7];
				dif2.color = [43,117,0, 0.7];
				dif3.color = [73,138,0,0.7];
				dif4.color = [103,158,0,0.7];
				dif5.color = [139,181,0,0.7];
				dif6.color = [176,207,0,0.7];
				dif7.color = [181,222,111,0.7];
				dif8.color = [255,255,255,0];
				dif8.outline.width=0;
				dif9.color = [255,229,90,0.7];
				dif10.color = [255,200,0,0.7];
				dif11.color = [255,166,0,0.7];
				dif12.color = [255,140,0,0.7];
				dif13.color = [255,111,0,0.7];
				dif14.color = [255,77,0,0.7];
				dif15.color = [255,38,0,0.7];
				renderer_E1C.field ="e1c_c_"+escenari;
				layerEscenari.renderer = renderer_E1C;
				renderer_max_E1C = {type: "class-breaks"};
				renderer_max_E1C.classBreakInfos = renderer_E1C.classBreakInfos;
				if (derivat == true){
					renderer_dif_E1C.valueExpression= tipus + fields_E1C + " - $feature.e1c_c_"+escenari;
					renderer_max_E1C.valueExpression= tipus + fields_E1C;
				} else {
					renderer_dif_E1C.valueExpression= document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsE1C) - " +tipus + fields_E1C  ;
					renderer_max_E1C.valueExpression = document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsE1C)";
				}
				layer4.renderer = renderer_dif_E1C;
				layer3.renderer = renderer_max_E1C;
				document.getElementById("descripcio").value = textE1C;
				break;
			case "F": 
				cat1.color = [237,185,214, 0.7];
				cat2.color = [222,153,181, 0.7];
				cat3.color = [207,124,150, 0.7];
				cat4.color = [191,98,124, 0.7];
				cat5.color = [176,72,100, 0.7];
				cat6.color = [161,47,77, 0.7];
				cat7.color = [143,17,57, 0.7];
				cat8.color = [125,0,37, 0.7];
				dif1.color = [255,38,0, 0.7];
				dif2.color = [255,81,0, 0.7];
				dif3.color = [255,119,0, 0.7];
				dif4.color = [255,153,0, 0.7];
				dif5.color = [255,187,0, 0.7];
				dif6.color = [255,221,0, 0.7];
				dif7.color = [255,255,255, 0];
				dif7.outline.width=0;
				dif8.color = [180,224,0, 0.7];
				dif9.color = [154,206,0, 0.7];
				dif10.color = [121,188,0, 0.7];
				dif11.color = [103,170,0, 0.7];
				dif12.color = [77,151,0, 0.7];
				dif13.color = [73,138,0,0.7];
				dif14.color = [26,115,0,0.7];
				dif15.color = [0,97,0,0.7];
				renderer_F.field ="f1_c_"+escenari;
				layerEscenari.renderer = renderer_F;
				renderer_max_F = {type: "class-breaks"};
				renderer_max_F.classBreakInfos = renderer_F.classBreakInfos;
				if (derivat == true){
					renderer_dif_F.valueExpression= tipus + fields_F + " - $feature.f1_c_"+escenari;
					renderer_max_F.valueExpression= tipus + fields_F;
				} else {
					renderer_dif_F.valueExpression= document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsF) -  $feature.f1_c_"+escenari;
					renderer_max_F.valueExpression = document.getElementById("arcadeB").text + " getPredominantCategory("+indicador_principal+",fieldsF)";
				}
				layer4.renderer = renderer_dif_F;
				layer3.renderer = renderer_max_F;
				document.getElementById("descripcio").value = textF;
				break;
		}
		//document.getElementById('descripcio').value = text[indicador];
		queryLayerViewStats(layer3,escenari,document.getElementById("field-select").value);
	  }
	  
	  
	   function canvi_tipus(){
			 tipus = document.getElementById("tipus").value;
			escenari = document.getElementById("escenari_id").value;
		switch (document.getElementById("field-select").value){
			case "A1": 
				renderer_max_A1.valueExpression = tipus + fields_A1;
				layer3.renderer = renderer_max_A1;
				renderer_dif_A1.valueExpression=tipus + fields_A1 + " - $feature.a1_c_"+escenari;
				layer4.renderer = renderer_dif_A1;
				break;
			case "A2": 
				renderer_max_A2.valueExpression = tipus + fields_A2;
				layer3.renderer = renderer_max_A2;
				renderer_dif_A2.valueExpression=tipus + fields_A2 + " - $feature.a2_c_"+escenari;
				layer4.renderer = renderer_dif_A2;
				break;
			case "B": 
				renderer_max_B.valueExpression= tipus + fields_B;
				layer3.renderer = renderer_max_B;
				renderer_dif_B.valueExpression=tipus + fields_B + " - $feature.b1_c_"+escenari;
				layer4.renderer = renderer_dif_B;
				break;
			case "C": 
				renderer_max_C.valueExpression= tipus + fields_C;
				layer3.renderer = renderer_max_C;
				renderer_dif_C.valueExpression=tipus + fields_C + " - $feature.c1_c_"+escenari;
				layer4.renderer = renderer_dif_C;
				break;
			case "D": 
				renderer_max_D.valueExpression=tipus + fields_D;
				layer3.renderer = renderer_max_D;
				renderer_dif_D.valueExpression=tipus + fields_D + " - $feature.d1_c_"+escenari;
				layer4.renderer = renderer_dif_B;
				break;
			case "E1A": 
				renderer_max_E1A.valueExpression=tipus + fields_E1A;
				layer3.renderer = renderer_max_E1A;
				renderer_dif_E1A.valueExpression=tipus + fields_E1A + " - $feature.e1a_c_"+escenari;
				layer4.renderer = renderer_dif_E1A;
				break;
			case "E1B": 
				renderer_max_E1B.valueExpression=tipus + fields_E1B;
				layer3.renderer = renderer_max_E1B;
				renderer_dif_E1B.valueExpression= tipus + fields_E1B + " - $feature.e1b_c_"+escenari;
				layer4.renderer = renderer_dif_E1B;
				break;
			case "E1C": 
				renderer_max_E1C.valueExpression=tipus + fields_E1C ;
				layer3.renderer = renderer_max_E1C;
				renderer_dif_E1C.valueExpression= tipus + fields_E1C + " - $feature.e1c_c_"+escenari;
				layer4.renderer = renderer_dif_E1C;
				break;
			case "F": 
				renderer_max_F.valueExpression=tipus + fields_F;
				layer3.renderer = renderer_max_F;
				renderer_dif_F.valueExpression= tipus + fields_F + " - $feature.f1_c_"+escenari;
				layer4.renderer = renderer_dif_F;
				break;
		}
		
	  }
	  
	  function canvi_escenari(valor){
		tipus = document.getElementById("tipus").value;
		var e = document.getElementById("escenari_id");
		var text_escenari = e.options[e.selectedIndex].text;
		document.getElementById("escenariDif").innerHTML = "Diferència escenari " + text_escenari + " i optimitzat";
		switch (document.getElementById("field-select").value){
			case "A1": 
				renderer_A1.field ="a1_c_"+ valor;
				layerEscenari.renderer = renderer_A1;
				renderer_dif_A1.valueExpression=tipus + fields_A1 + " - $feature.a1_c_"+valor;
				layer4.renderer = renderer_dif_A1;
				break;
			case "A2": 
				renderer_A2.field ="a2_c_"+ valor;
				layerEscenari.renderer = renderer_A2;
				renderer_dif_A2.valueExpression=tipus + fields_A2 + " - $feature.a2_c_"+valor;
				layer4.renderer = renderer_dif_A2;
				break;
			case "B": 
				renderer_B.field ="b1_c_"+ valor;
				layerEscenari.renderer = renderer_B;
				renderer_dif_B.valueExpression=tipus + fields_B + " - $feature.b1_c_"+valor;
				layer4.renderer = renderer_dif_B;
				break;
			case "C": 
				renderer_C.field ="c1_c_"+ valor;
				layerEscenari.renderer = renderer_C;
				renderer_dif_C.valueExpression=tipus + fields_C + " - $feature.c1_c_"+valor;
				layer4.renderer = renderer_dif_C;
				break;
			case "D": 
				renderer_D.field ="d1_c_"+ valor;
				layerEscenari.renderer = renderer_D;
				renderer_dif_D.valueExpression=tipus + fields_D + " - $feature.d1_c_"+valor;
				layer4.renderer = renderer_dif_B;
				break;
			case "E1A": 
				renderer_E1A.field ="e1a_c_"+ valor;
				layerEscenari.renderer = renderer_E1A;
				renderer_dif_E1A.valueExpression=tipus + fields_E1A + " - $feature.e1a_c_"+valor;
				layer4.renderer = renderer_dif_E1A;
				break;
			case "E1B": 
				renderer_E1B.field ="e1b_c_"+ valor;
				layerEscenari.renderer = renderer_E1B;
				renderer_dif_E1B.valueExpression= tipus + fields_E1B + " - $feature.e1b_c_"+valor;
				layer4.renderer = renderer_dif_E1B;
				break;
			case "E1C": 
				renderer_E1C.field ="e1c_c_"+ valor;
				layerEscenari.renderer = renderer_E1C;
				renderer_dif_E1C.valueExpression= tipus + fields_E1C + " - $feature.e1c_c_"+valor;
				layer4.renderer = renderer_dif_E1C;
				break;
			case "F": 
				renderer_F.field ="f1_c_"+ valor;
				layerEscenari.renderer = renderer_F;
				renderer_dif_F.valueExpression= tipus + fields_F + " - $feature.f1_c_"+valor;
				layer4.renderer = renderer_dif_F;
				break;
		}
		queryLayerViewStats(layer3,valor,document.getElementById("field-select").value);
	  }
	  
		function canvi_text(indica){
		 switch (indica) {
			case "A1": document.getElementById("descripcio2").value = textA1;break;
			case "A2": document.getElementById("descripcio2").value = textA1;break;
			case "B": document.getElementById("descripcio2").value = textB;break;
			case "C": document.getElementById("descripcio2").value = textC;break;
			case "D": document.getElementById("descripcio2").value = textD;break;
			case "E1A": document.getElementById("descripcio2").value = textE1A;break;
			case "E1B": document.getElementById("descripcio2").value = textE1B;break;
			case "E1C": document.getElementById("descripcio2").value = textE1C;break;
			case "F": document.getElementById("descripcio2").value = textF;break;
		 }
		}
	  
	 // Descripcions
	 textA1 = "La dimensió eficiència metabòlica es representa amb l’indicador principal A1 que mesura l’eficiència energètica de" +
		   " l’agricultura metropolitana. Aquest indicador, que és l’External Final Energy Return On Investment (EFEROI)1 determina " +
			" quina és la quantitat d’energia obtinguda en els espais agrícoles segons la quantitat d’energia externa invertida. Així, els " +
			" valors més elevats indiquen cultius que tenen un major retorn per unitat d’inversió.";
			
	textB = "La dimensió conservació de la biodiversitat es representa amb l’indicador principal B1 que correspon al valor de l’Energy-" +
			"Landscape Integrated Analysis. Aquest avalua les condicions sòcio-ecològiques per a l’establiment de la biodiversitat" +
			" associada a partir dels patrons i processos del paisatge (complexitat paisatgística) i els fluxos de metabolisme agrari (energia"+
			" redistribuïda i energia acumulada). Valors elevats indiquen doncs condicions adequades per a la biodiversitat associada.";
	
	textC = "La dimensió de funcionament del paisatge es representa amb l’indicador principal C1 que és la complexitat paisatgística." +
			"Aquesta, valora l’estructura funcional del paisatge (patrons i processos) a partir de la conjunció entre la connectivitat" +
			" ecològica i l’heterogeneïtat de les cobertes. Valors alts d’aquest indicador impliquen una major complexitat del paisatge.";
	
	textD = "La dimensió de canvi global es representa amb l’indicador principal D1 que són les emissions de gasos d’efecte hivernacle." +
			"En aquest cas es fa una primera aproximació calculant la quantitat d’entrades externes totals no renovables per a mantenir " +
			"la silvicultura, la ramaderia i l’agricultura a partir del seu valor energètic, que prové del balanç metabòlic1 calculat per l’AMB." +
			"Un valor més elevat d’aquest indicador doncs, s’associaria a processos més intensius i dependents d’importacions i per tant a una probable major intensitat d’emissions totals.";
			
	textE1A = "La dimensió de serveis ecosistèmics de suport es caracteritza amb l’indicador principal E1A de recirculació de nutrients. Així," +
			"E1A avalua la quantitat de fòsfor que recircula dins del propi sistema agrícola entenent-lo en interacció amb la resta d’usos i " +
			"la ramaderia. Per tant, valors elevats en l’indicador es refereixen a una alta capacitat del sistema metropolità per fer front de "+
			"forma autosuficient al tancament de cicles de nutrients. ";
			
	textE1B = "La dimensió dels serveis ecosistèmics de regulació es representa amb l’indicador E1B que és l’embornal de carboni i " +
			"identifica quina és la quantitat total de carboni emmagatzemat al sistema d’espais oberts. Així només pren valor per a aquelles " +
			"superfícies agràries a on existeixi un sòl mínimament desenvolupat (en termes edàfics), considerant tant el carboni al sòl " +
			"com el carboni aeri. En aquest cas, el grau de detall de l’indicador permet una identificació molt més localitzada dels valors gràcies a la informació geo-referenciada disponible.";
			
	textE1C = "La dimensió dels serveis ecosistèmics d’aprovisionament es representa amb l’indicador principal E1C que és la producció " +
			"agrícola. Es calcula doncs aquest valor donada la seva predominança respecte a la resta de produccions (silvícola, ramadera) " +
			"i el seu efecte territorial. Valors elevats mostraran aquelles zones més productives en termes agrícoles d’aprovisionament de tota l’àrea.";
			
	textF = "La dimensió de cohesió social es representa amb l’indicador principal F1 que són els llocs de treball. Caracteritza el potencial " +
			"d’Unitats de Treball Agrari (UTA) completes que es requeririen als espais oberts de l’àrea metropolitana, el qual es pot " +
			"aproximar a una mesura dels llocs de treball potencials en aquests. Així, els cultius i activitats agràries més intensives en " + 
			"llocs de treball s’identifiquen amb valors majors d’F1 mentre que aquelles activitats més extensives en treball (o més mecanitzades) tindran valors més baixos.";
			
				
			
		function queryLayerViewStats(capa,escenari,indicador) {
		
			valorsA1_actual = [];
			valorsA1_tend = [];
			valorsA1_2_actual = [];
			valorsA1_2_tend = [];
			valorsA2_actual = [];
			valorsA2_tend = [];
			valorsA3_actual = [];
			valorsA3_tend = [];
			valorsB_actual = [];
			valorsB_tend = [];
			valorsC_actual = [];
			valorsC_tend = [];
			valorsD_actual = [];
			valorsD_tend = [];
			valorsD1 = [];
			valorsE1A1_actual = [];
			valorsE1A1_tend = [];
			valorsE1A2_actual = [];
			valorsE1A2_tend = [];
			valorsE1B_actual = [];
			valorsE1B_tend = [];
			valorsE1C_actual = [];
			valorsE1C_tend = [];
			valorsE1C1 = [];
			valorsF_actual = [];
			valorsF_tend = [];
			valorsF1 = [];
			valorsOptA1 = [];
			valorsOptA1_2 = [];
			valorsOptA2 = [];
			valorsOptA3 = [];
			valorsOptB = [];
			valorsOptC = [];
			valorsOptD1 = [];
			valorsOptE1A1 = [];
			valorsOptE1A2 = [];
			valorsOptE1B = [];
			valorsOptE1C1 = [];
			valorsOptF1 = [];
			valorMaxA1 = 0;
			valorMaxA1_2 = 0;
			valorMaxA2 = 0;
			valorMaxA3 = 0;
			valorMaxB =0;
			valorMaxC = 0;
			valorMaxD = 0;
			valorMaxE1A1 = 0;
			valorMaxE1A2 = 0;
			valorMaxE1B = 0;
			valorMaxE1C = 0;
			valorMaxF = 0;
			capa.queryFeatures().then(function(response) {	
				 var fieldsA1 = [
				  { value: "a1_c_0"},
				  { value: "a1_c_1"},
				  { value: "a1_c_2"},
				  { value: "a1_c_3"},
				  { value: "a1_o_0"},
				  { value: "a1_o_1"},
				  { value: "a1_o_2"},
				  { value: "a1_o_3"}
				];
				var fieldsA1_agg = [
				  { value: "a1_c_0_1"},
				  { value: "a1_c_1_1"},
				  { value: "a1_c_2_1"},
				  { value: "a1_c_3_1"},
				  { value: "a1_o_0_1"},
				  { value: "a1_o_1_1"},
				  { value: "a1_o_2_1"},
				  { value: "a1_o_3_1"}
				];
				var fieldsA1_2_agg = [
				  { value: "a1_c_0_2"},
				  { value: "a1_c_1_2"},
				  { value: "a1_c_2_2"},
				  { value: "a1_c_3_2"},
				  { value: "a1_o_0_2"},
				  { value: "a1_o_1_2"},
				  { value: "a1_o_2_2"},
				  { value: "a1_o_3_2"}
				];
				 var fieldsA2 = [
				  { value: "a2_c_0"},
				  { value: "a2_c_1"},
				  { value: "a2_c_2"},
				  { value: "a2_c_3"},
				  { value: "a2_o_0"},
				  { value: "a2_o_1"},
				  { value: "a2_o_2"},
				  { value: "a2_o_3"}
				];
				 var fieldsA3 = [
				  { value: "a3_c_0"},
				  { value: "a3_c_1"},
				  { value: "a3_c_2"},
				  { value: "a3_c_3"},
				  { value: "a3_o_0"},
				  { value: "a3_o_1"},
				  { value: "a3_o_2"},
				  { value: "a3_o_3"}
				];
				var fieldsB = [
				  { value: "b1_c_0" },
				  { value: "b1_c_1" },
				  { value: "b1_c_2" },
				  { value: "b1_c_3" },
				  { value: "b1_o_0" },
				  { value: "b1_o_1" },
				  { value: "b1_o_2" },
				  { value: "b1_o_3" }
				];
				
				var fieldsC = [
				  { value: "c1_c_0" },
				  { value: "c1_c_1" },
				  { value: "c1_c_2" },
				  { value: "c1_c_3" },
				  { value: "c1_o_0" },
				  { value: "c1_o_1" },
				  { value: "c1_o_2" },
				  { value: "c1_o_3" }
				];
				var fieldsD = [
				  { value: "d1_c_0" },
				  { value: "d1_c_1" },
				  { value: "d1_c_2" },
				  { value: "d1_c_3" },
				  { value: "d1_o_0" },
				  { value: "d1_o_1" },
				  { value: "d1_o_2" },
				  { value: "d1_o_3" }
				];
				var fieldsD_agg = [
				  { value: "d1_c_0_1" },
				  { value: "d1_c_1_1" },
				  { value: "d1_c_2_1" },
				  { value: "d1_c_3_1" },
				  { value: "d1_o_0_1" },
				  { value: "d1_o_1_1" },
				  { value: "d1_o_2_1" },
				  { value: "d1_o_3_1" }
				];
				var fieldsE1A = [
				  { value: "e1a_c_0" },
				  { value: "e1a_c_1" },
				  { value: "e1a_c_2" },
				  { value: "e1a_c_3" },
				  { value: "e1a_o_0" },
				  { value: "e1a_o_1" },
				  { value: "e1a_o_2" },
				  { value: "e1a_o_3" }
				];
				var fieldsE1A1_agg = [
				  { value: "e1a_c_0_1" },
				  { value: "e1a_c_1_1" },
				  { value:  "e1a_c_2_1" },
				  { value: "e1a_c_3_1" },
				  { value: "e1a_o_0_1" },
				  { value: "e1a_o_1_1" },
				  { value: "e1a_o_2_1" },
				  { value: "e1a_o_3_1" }
				];
				var fieldsE1A2_agg = [
				  { value: "e1a_c_0_2" },
				  { value: "e1a_c_1_2" },
				  { value: "e1a_c_2_2" },
				  { value: "e1a_c_3_2" },
				  { value: "e1a_o_0_2" },
				  { value: "e1a_o_1_2" },
				  { value: "e1a_o_2_2" },
				  { value: "e1a_o_3_2" }
				];
				var fieldsE1B = [
				  { value: "e1b_c_0" },
				  { value: "e1b_c_1" },
				  { value: "e1b_c_2" },
				  { value: "e1b_c_3" },
				  { value: "e1b_o_0" },
				  { value: "e1b_o_1" },
				  { value: "e1b_o_2" },
				  { value: "e1b_o_3" }
				];
				var fieldsE1C = [
				  { value: "e1c_c_0" },
				  { value: "e1c_c_1" },
				  { value: "e1c_c_2" },
				  { value: "e1c_c_3" },
				  { value: "e1c_o_0" },
				  { value: "e1c_o_1" },
				  { value: "e1c_o_2" },
				  { value: "e1c_o_3" }
				];
				var fieldsE1C_agg = [
				  { value: "e1c_c_0_1" },
				  { value: "e1c_c_1_1" },
				  { value: "e1c_c_2_1" },
				  { value: "e1c_c_3_1" },
				  { value: "e1c_o_0_1" },
				  { value: "e1c_o_1_1" },
				  { value: "e1c_o_2_1" },
				  { value: "e1c_o_3_1" }
				];
				var fieldsF = [
				  { value: "f1_c_0" },
				  { value: "f1_c_1" },
				  { value: "f1_c_2" },
				  { value: "f1_c_3" },
				  { value: "f1_o_0" },
				  { value: "f1_o_1" },
				  { value: "f1_o_2" },
				  { value: "f1_o_3" }
				];
				var fieldsF_agg = [
				  { value: "f1_c_0_1" },
				  { value: "f1_c_1_1" },
				  { value: "f1_c_2_1" },
				  { value: "f1_c_3_1" },
				  { value: "f1_o_0_1" },
				  { value: "f1_o_1_1" },
				  { value: "f1_o_2_1" },
				  { value: "f1_o_3_1" }
				];
				switch (indicador){
					case "A1": camps = fieldsA1;break;
					case "A2": camps = fieldsA2;break;
					case "A3": camps = fieldsA3;break;
					case "B": camps = fieldsB;break;
					case "C": camps = fieldsC;break;
					case "D": camps = fieldsD;break;
					case "E1A": camps = fieldsE1A;break;
					case "E1B": camps = fieldsE1B;break;
					case "E1C": camps = fieldsE1C;break;
					case "F": camps = fieldsF;break;
				}
				
				response.features.map(function(feature) {
					valorMax = 0;	
					for(var k in camps){
						if(feature.attributes[camps[k].value] >= valorMax){
							switch (indicador){
								case "A1": valorMax = feature.attributes[fieldsA1[k].value];break;
								case "A2": valorMax = feature.attributes[fieldsA2[k].value];break;
								case "A3": valorMax = feature.attributes[fieldsA3[k].value];break;
								case "B": valorMax = feature.attributes[fieldsB[k].value];break;
								case "C": valorMax = feature.attributes[fieldsC[k].value];break;
								case "D": valorMax = feature.attributes[fieldsD[k].value];break;
								case "E1A": valorMax = feature.attributes[fieldsE1A[k].value];break;
								case "E1B": valorMax = feature.attributes[fieldsE1B[k].value];break;
								case "E1C": valorMax = feature.attributes[fieldsE1C[k].value];break;
								case "F": valorMax = feature.attributes[fieldsF[k].value];break;
							}
							valorMaxA1 = feature.attributes[fieldsA1_agg[k].value];
							valorMaxA1_2 = feature.attributes[fieldsA1_2_agg[k].value];
							valorMaxA2 = feature.attributes[fieldsA2[k].value];
							valorMaxA3 = feature.attributes[fieldsA3[k].value];
							valorMaxB = feature.attributes[fieldsB[k].value];
							valorMaxC = feature.attributes[fieldsC[k].value];
							valorMaxD1 = feature.attributes[fieldsD_agg[k].value];
							valorMaxE1A1 = feature.attributes[fieldsE1A1_agg[k].value];
							valorMaxE1A2 = feature.attributes[fieldsE1A2_agg[k].value];
							valorMaxE1B = feature.attributes[fieldsE1B[k].value];
							valorMaxE1C1 = feature.attributes[fieldsE1C_agg[k].value];
							valorMaxF1 = feature.attributes[fieldsF_agg[k].value];
						} 
					}
					//Indicador A1
					valorsA1_actual.push(feature.attributes[fieldsA1_agg[0].value]);
					valorsA1_tend.push(feature.attributes[fieldsA1_agg[1].value]);
					valorsA1_2_actual.push(feature.attributes[fieldsA1_2_agg[0].value]);
					valorsA1_2_tend.push(feature.attributes[fieldsA1_2_agg[1].value]);
					valorsOptA1.push(valorMaxA1);
					valorsOptA1_2.push(valorMaxA1_2);
					//Indicador A2
					valorsA2_actual.push(feature.attributes[fieldsA2[0].value]);
					valorsA2_tend.push(feature.attributes[fieldsA2[1].value]);
					valorsOptA2.push(valorMaxA2);
					//Indicador A3
					valorsA3_actual.push(feature.attributes[fieldsA3[0].value]);
					valorsA3_tend.push(feature.attributes[fieldsA3[1].value]);
					valorsOptA3.push(valorMaxA3);
					//Indicador B
					valorsB_actual.push(feature.attributes[fieldsB[0].value]*feature.attributes["amb_100"]);
					valorsB_tend.push(feature.attributes[fieldsB[1].value]*feature.attributes["amb_100"]);
					valorsOptB.push(valorMaxB*feature.attributes["amb_100"]);
					//Indicador C
					valorsC_actual.push(feature.attributes[fieldsC[0].value]*feature.attributes["amb_100"]);
					valorsC_tend.push(feature.attributes[fieldsC[1].value]*feature.attributes["amb_100"]);
					valorsOptC.push(valorMaxC*feature.attributes["amb_100"]);
					//Indicador D
					valorsD_actual.push(feature.attributes[fieldsD_agg[0].value]);
					valorsD_tend.push(feature.attributes[fieldsD_agg[1].value]);
					valorsD1.push(feature.attributes[fieldsD_agg[1].value]);
					valorsOptD1.push(valorMaxD1);
					//Indicador E1A
					valorsE1A1_actual.push(feature.attributes[fieldsE1A1_agg[0].value]);
					valorsE1A2_actual.push(feature.attributes[fieldsE1A2_agg[0].value]);
					valorsE1A1_tend.push(feature.attributes[fieldsE1A1_agg[1].value]);
					valorsE1A2_tend.push(feature.attributes[fieldsE1A2_agg[1].value]);
					valorsOptE1A1.push(valorMaxE1A1);
					valorsOptE1A2.push(valorMaxE1A2);
					//Indicador E1B	
					valorsE1B_actual.push(feature.attributes[fieldsE1B[0].value]);
					valorsE1B_tend.push(feature.attributes[fieldsE1B[1].value]);					
					valorsOptE1B.push(valorMaxE1B);
					//Indicador E1C
					valorsE1C_actual.push(feature.attributes[fieldsE1C[0].value]);
					valorsE1C_tend.push(feature.attributes[fieldsE1C[1].value]);
					valorsE1C1.push(feature.attributes[fieldsE1C_agg[0].value]);
					valorsOptE1C1.push(valorMaxE1C1);
					//Indicador F
					valorsF_actual.push(feature.attributes[fieldsF_agg[0].value]);
					valorsF_tend.push(feature.attributes[fieldsF_agg[1].value]);
					valorsOptF1.push(valorMaxF1);
				});
				//Indicador D
				
				valorsMaxA1=[];
				valorsMaxA1_2=[];
				
				valorsMaxA2=[];
				
				valorsMaxA3=[];
				
				valorsMaxB=[];
				
				valorsMaxC=[];
				
				valorsMinD1=[];
				
				valorsMaxE1A1=[];
				valorsMaxE1A2=[];
				
				valorsMaxE1B=[];
				
				valorsMaxE1C1=[];
				
				valorsMaxF1=[];
				
				response.features.map(function(feature) {
					//Calcul de maxims
					//indicador A1
					valorMaxA1=0;
					for(var k in fieldsA1){
						if(feature.attributes[fieldsA1[k].value] >= valorMaxA1){
							valorMaxA = feature.attributes[fieldsA1[k].value];
							valorMaxA1 = feature.attributes[fieldsA1_agg[k].value];
							valorMaxA1_2 = feature.attributes[fieldsA1_2_agg[k].value];
						}
					}
					valorsMaxA1.push(valorMaxA1);
					valorsMaxA1_2.push(valorMaxA1_2);
					
					//indicador A2
					valorMaxA2=0;
					for(var k in fieldsA2){
						if(feature.attributes[fieldsA2[k].value] >= valorMaxA2){
							valorMaxA2 = feature.attributes[fieldsA2[k].value];
						}
					}

					valorsMaxA2.push(valorMaxA2);
					
					//indicador A3
					valorMaxA3=0;
					for(var k in fieldsA3){
						if(feature.attributes[fieldsA3[k].value] >= valorMaxA3){
							valorMaxA3 = feature.attributes[fieldsA3[k].value];
						}
					}
					valorsMaxA3.push(valorMaxA3);
					
					//indicador B
					valorMaxB=0;
					for(var k in fieldsB){
						if(feature.attributes[fieldsB[k].value] >= valorMaxB){
							valorMaxB = feature.attributes[fieldsB[k].value];
						}
					}
					valorsMaxB.push(valorMaxB);
					//indicador C
					valorMaxC=0;
					for(var k in fieldsC){
						if(feature.attributes[fieldsC[k].value] >= valorMaxC){
							valorMaxC = feature.attributes[fieldsC[k].value];
						}
					}
					valorsMaxC.push(valorMaxC);
					valorMinD1 = 0;
					//indicador D
					for(var k in fieldsD){
						
						if(feature.attributes[fieldsD[k].value] >= valorMinD1){
							valorMinD1 = feature.attributes[fieldsD[k].value];
							//valorMinD1 = feature.attributes[fieldsD_agg[k].value];
						}
					}
					
					valorsMinD1.push(valorMinD1);
					//indicador E1A
					valorMaxE1A=0;
					for(var k in fieldsE1A){
						if(feature.attributes[fieldsE1A[k].value] >= valorMaxE1A){
							valorMaxE1A = feature.attributes[fieldsE1A[k].value];
							valorMaxE1A1 = feature.attributes[fieldsE1A1_agg[k].value];
							valorMaxE1A2 = feature.attributes[fieldsE1A2_agg[k].value];
						}
					}
					valorsMaxE1A1.push(valorMaxE1A1);
					valorsMaxE1A2.push(valorMaxE1A2);
					//indicador E1B
					valorMaxE1B=0;
					for(var k in fieldsE1B){
						if(feature.attributes[fieldsE1B[k].value] >= valorMaxE1B){
							valorMaxE1B = feature.attributes[fieldsE1B[k].value];
						}
					}
					valorsMaxE1B.push(valorMaxE1B);
					//indicador E1C
					valorMaxE1C=0;
					for(var k in fieldsE1C){
						if(feature.attributes[fieldsE1C[k].value] >= valorMaxE1C){
							valorMaxE1C = feature.attributes[fieldsE1C[k].value];
							valorMaxE1C1 = feature.attributes[fieldsE1C_agg[k].value];
						}
					}
					valorsMaxE1C1.push(valorMaxE1C1);
					//indicador F
					valorMaxF1=0;
					for(var k in fieldsF){
						if(feature.attributes[fieldsF[k].value] >= valorMaxF1){
							valorMaxF1 = feature.attributes[fieldsF_agg[k].value];
						}
					}
					valorsMaxF1.push(valorMaxF1);
				});
					arrMax = arr => Math.max(...arr);
					arrMin = arr => Math.min(...arr);
					arrSum = arr => arr.reduce((a,b) => a + b, 0);
					arrAvg = arr => arr.reduce((a,b) => a + b, 0) / arr.length;
					
					
					
					
					//Escenari maxim
					indicador_A1_max = (arrSum(valorsOptA1) / arrSum(valorsOptA1_2)) / (arrSum(valorsMaxA1)/ arrSum(valorsMaxA1_2));
					indicador_A2_max = (arrAvg(valorsOptA2) / 1000000) / (arrAvg(valorsMaxA2) / 1000000);
					indicador_A3_max = (arrAvg(valorsOptA3) / 1000000) / (arrAvg(valorsMaxA3) / 1000000);
					indicador_B_max = arrAvg(valorsOptB) / arrAvg(valorsMaxB);
					indicador_C_max = arrAvg(valorsOptC) / arrAvg(valorsMaxC);
					indicador_D_max = 1; // (arrSum(valorsMinD1) / Math.pow(10.6)) / (arrSum(valorsOptD1) / Math.pow(10.6)) ;
					indicador_E1A_max = ((arrSum(valorsOptE1A1) / arrSum(valorsOptE1A2)) * 100) / ((arrSum(valorsMaxE1A1) / arrSum(valorsMaxE1A2)) * 100);
					indicador_E1B_max = (arrSum(valorsOptE1B) / 1000) / (arrSum(valorsMaxE1B) / 1000);
					indicador_E1C_max = (arrSum(valorsOptE1C1) / 1000) / (arrSum(valorsMaxE1C1) / 1000);
					indicador_F_max = arrSum(valorsOptF1) / arrSum(valorsMaxF1);
					
					//escenari optim
					if (escenari == 0) {
						indicador_A1 = (arrSum(valorsA1_actual) / arrSum(valorsA1_2_actual)) / (arrSum(valorsMaxA1)/ arrSum(valorsMaxA1_2));
						indicador_A2 = (arrSum(valorsA2_actual) / 1000000) /  (arrSum(valorsMaxA2) / 1000000);
						indicador_A3 = (arrSum(valorsA3_actual) / 1000000) / (arrSum(valorsMaxA3) / 1000000);
						indicador_B = arrAvg(valorsB_actual) / arrAvg(valorsMaxB);
						indicador_C = arrAvg(valorsC_actual) / arrAvg(valorsMaxC);
						indicador_D =  1; (arrSum(valorsD_actual) / Math.pow(10.6)) / (arrSum(valorsMinD1) / Math.pow(10.6))  ;
						indicador_E1A = ((arrSum(valorsE1A1_actual) / arrSum(valorsE1A2_actual)) * 100) / ((arrSum(valorsMaxE1A1) / arrSum(valorsMaxE1A2)) * 100);
						indicador_E1B = (arrSum(valorsE1B_actual) / 1000) / (arrSum(valorsMaxE1B) / 1000);
						indicador_E1C = (arrSum(valorsE1C1) / 1000) / (arrSum(valorsMaxE1C1) / 1000);
						indicador_F = arrSum(valorsF_actual) / arrSum(valorsMaxF1);
						
						aranya2(indicador_A1 , indicador_A2, indicador_A3,indicador_B,indicador_C,indicador_D,indicador_E1A,indicador_E1B,indicador_E1C,indicador_F,"rgba(200,0,0,0.6)","Escenari actual");
					} else {
						indicador_A1 = (arrSum(valorsA1_tend) / arrSum(valorsA1_2_tend)) / (arrSum(valorsOptA1)/ arrSum(valorsOptA1_2));
						indicador_A2 = arrAvg(valorsA2_tend) / 1000000;
						indicador_A3 = arrAvg(valorsA3_tend) / arrAvg(valorsMaxA3);
						indicador_B = arrAvg(valorsB_tend) / arrAvg(valorsMaxB);
						indicador_C = arrAvg(valorsC_tend) / arrAvg(valorsMaxC);
						indicador_D = 1; //(arrSum(valorsD_tend) / Math.pow(10.6))  / (arrSum(valorsMinD1) / Math.pow(10.6));
						indicador_E1A = ((arrSum(valorsE1A1_tend) / arrSum(valorsE1A2_tend)) * 100) / ((arrSum(valorsMaxE1A1) / arrSum(valorsMaxE1A2)) * 100);
						indicador_E1B = (arrSum(valorsE1B_tend) / 1000) / (arrSum(valorsMaxE1B) / 1000);
						indicador_E1C = (arrSum(valorsE1C1) / 1000) / (arrSum(valorsMaxE1C1) / 1000);
						indicador_F = arrSum(valorsF_tend) / arrSum(valorsMaxF1);
						aranya2(indicador_A1 ,indicador_A2 ,indicador_A3 ,indicador_B,indicador_C,indicador_D,indicador_E1A,indicador_E1B,indicador_E1C,indicador_F,"rgba(200,0,0,0.6)","Escenari tendencial");
					}

				
				});
			
		}
		
		function aranya(indicador_A1 ,indicador_A2 ,indicador_A3 ,indicador_B,indicador_C,indicador_D,indicador_E1A,indicador_E1B,indicador_E1C,indicador_F,color,titol){
			//console.log(indicador_A_max  + "//" + indicador_B_max + "//" + indicador_C_max + "//" + indicador_D_max + "//" + indicador_E1A_max + "//" + indicador_E1B_max + "//" + indicador_E1C_max + "//" + indicador_F_max);
			  var marksData = {
			  labels: ["A1", "A2","A3", "B", "C", "D", "E1A", "E1B","E1C","F"],
			  datasets: [{
				label: titol,
				backgroundColor: "transparent",
				borderColor: color,
				fill: false,
				data: [indicador_A1 ,indicador_A2 ,indicador_A3 ,indicador_B,indicador_C,indicador_D,indicador_E1A,indicador_E1B,indicador_E1C,indicador_F]
			  },
			  {
				  label: "Escenari optimitzat",
				backgroundColor: "transparent",
				borderColor: "rgba(200,200,0,0.6)",
				 fill: false,
				data: [indicador_A1_max ,indicador_A2_max ,indicador_A3_max ,indicador_B_max,indicador_C_max,indicador_D_max,indicador_E1A_max,indicador_E1B_max,indicador_E1C_max,indicador_F_max]
			  }]
			};
			
			if(radarChart) radarChart.destroy();
			radarChart = new Chart(marksChart, {
			  type: 'radar',
			  data: marksData,
			  width:100,
			  height:100,
			  options: {
					scale: {
						angleLines: {
							display: false
						},
						ticks: {
							suggestedMin: 0,
							suggestedMax: 1
						}
					}
				}
			});
			
			//radarChart.data=marksData;
			//radarChart.update();
			//radarChart.resize(50,50);
		}
		
		function aranya2(indicador_A1 ,indicador_A2 ,indicador_A3 ,indicador_B,indicador_C,indicador_D,indicador_E1A,indicador_E1B,indicador_E1C,indicador_F,color,titol){
		    var options = {
				chart: {
					height: 350,
					type: 'radar',
				},
				series: [{
					name: titol,
					data: [indicador_A1 ,indicador_A2 ,indicador_A3 ,indicador_B,indicador_C,indicador_D,indicador_E1A,indicador_E1B,indicador_E1C,indicador_F],
				},{
					name: "Escenari optimitzat",
					data: [indicador_A1_max ,indicador_A2_max ,indicador_A3_max ,indicador_B_max,indicador_C_max,indicador_D_max,indicador_E1A_max,indicador_E1B_max,indicador_E1C_max,indicador_F_max],
				}],
				labels:  ["Rendiment metabòlic d'energia (A1A)", "Rendiment metabòlic d'aigua (A1B)","Rendiment metabòlic de matèria (A1C)"," Conservació de la biodiversitat (B1)", "Funcionament del paisatge (C1)", "Canvi global (D1)", "Serveis ecosistèmics de suport (E1A)", "Serveis ecosistèmics de regulació (E1B)","Serveis ecosistèmics d’aprovisionament (E1C)","Cohesió social (F1)"],
				plotOptions: {
					radar: {
						size: 140,
						polygons: {
							strokeColor: '#e9e9e9',
							fill: {
								colors: []
							}
						}
					}
				},
				
				colors: ['#AAAAAA','#00FF00'],
				fill:{type: 'gsolid',opacity:0 },
				stroke: {
					  show: true,
					  width: 2,
					  colors: ['#AAAAAA','#00FF00'],
					  dashArray: 0
					}
				  ,
				markers: {
					size: 2,
					strokeColors: ['#AAAAAA','#00FF00'],
					strokeWidth: 2,
				},
				tooltip: {
					y: {
						formatter: function(val) {
							return val.toFixed(2);
						}   
					}
				},
				yaxis: {
					tickAmount: 10,
					min:0,
					max:1,
					decimalsInFloat: 3,
					forceNiceScale: false,
					labels: {
						formatter: function(val, i) {
							if(i % 2 === 0) {
								return val.toFixed(1);
							} else {
								return ''
							}
						}
					}
				}
			}
		document.getElementById("marksChart").innerHTML = "<div id='marksChart'></div>";
        chart = new ApexCharts(
            document.querySelector("#marksChart"),
            options
        );

        chart.render();
		}

			