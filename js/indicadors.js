/*****************************************************************
         * Define symbols for each class break.
         *****************************************************************/
		 fields_A1 = "($feature.a1a_c_0,$feature.a1a_c_1,$feature.a1a_c_2,$feature.a1a_c_3)";
		 fields_A2 = "($feature.a1b_c_0,$feature.a1b_c_1,$feature.a1b_c_2,$feature.a1b_c_3)";
		 fields_A3 = "($feature.a1c_c_0,$feature.a1c_c_1,$feature.a1c_c_2,$feature.a1c_c_3)";
		 fields_B = "($feature.b1_c_0,$feature.b1_c_1,$feature.b1_c_2,$feature.b1_c_3)";
		 fields_C = "($feature.c1_c_0,$feature.c1_c_1,$feature.c1_c_2,$feature.c1_c_3)";
		 fields_D = "($feature.d1_c_0,$feature.d1_c_1,$feature.d1_c_2,$feature.d1_c_3)";
		 fields_E1A = "($feature.e1a_c_0,$feature.e1a_c_1,$feature.e1a_c_2,$feature.e1a_c_3)";
		 fields_E1B = "($feature.e1b_c_0,$feature.e1b_c_1,$feature.e1b_c_2,$feature.e1b_c_3)";
		 fields_E1C = "($feature.e1c_c_0,$feature.e1c_c_1,$feature.e1c_c_2,$feature.e1c_c_3)";
		 fields_F = "($feature.f1_c_0,$feature.f1_c_1,$feature.f1_c_2,$feature.f1_c_3)";
		 indicador_A1 =0;
		 indicador_A2 =0;
		 indicador_A3 =0;
		 indicador_B = 0;
		 indicador_C = 0;
		 indicador_D = 0
		 indicador_E1A = 0;
		 indicador_E1B = 0;
		 indicador_E1C = 0;
		 indicador_F = 0;

		var fieldsA1 = [
			{ value: "a1a_c_0"},
			{ value: "a1a_c_1"},
			{ value: "a1a_c_2"},
			{ value: "a1a_c_3"},
			{ value: "a1a_o_0"},
			{ value: "a1a_o_1"},
			{ value: "a1a_o_2"},
			{ value: "a1a_o_3"}
		];
		var fieldsA1_agg = [
			{ value: "a1a_c_0_1"},
			{ value: "a1a_c_1_1"},
			{ value: "a1a_c_2_1"},
			{ value: "a1a_c_3_1"},
			{ value: "a1a_o_0_1"},
			{ value: "a1a_o_1_1"},
			{ value: "a1a_o_2_1"},
			{ value: "a1a_o_3_1"}
		];
		var fieldsA1_2_agg = [
			{ value: "a1a_c_0_2"},
			{ value: "a1a_c_1_2"},
			{ value: "a1a_c_2_2"},
			{ value: "a1a_c_3_2"},
			{ value: "a1a_o_0_2"},
			{ value: "a1a_o_1_2"},
			{ value: "a1a_o_2_2"},
			{ value: "a1a_o_3_2"}
		];
		var fieldsA2 = [
			{ value: "a1b_c_0"},
			{ value: "a1b_c_1"},
			{ value: "a1b_c_2"},
			{ value: "a1b_c_3"},
			{ value: "a1b_o_0"},
			{ value: "a1b_o_1"},
			{ value: "a1b_o_2"},
			{ value: "a1b_o_3"}
		];
		var fieldsA2_agg = [
			{ value: "a1b_c_0_1"},
			{ value: "a1b_c_1_1"},
			{ value: "a1b_c_2_1"},
			{ value: "a1b_c_3_1"},
			{ value: "a1b_o_0_1"},
			{ value: "a1b_o_1_1"},
			{ value: "a1b_o_2_1"},
			{ value: "a1b_o_3_1"}
		];
		var fieldsA3 = [
			{ value: "a1c_c_0"},
			{ value: "a1c_c_1"},
			{ value: "a1c_c_2"},
			{ value: "a1c_c_3"},
			{ value: "a1c_o_0"},
			{ value: "a1c_o_1"},
			{ value: "a1c_o_2"},
			{ value: "a1c_o_3"}
		];
		var fieldsA3_agg = [
			{ value: "a1c_c_0_1"},
			{ value: "a1c_c_1_1"},
			{ value: "a1c_c_2_1"},
			{ value: "a1c_c_3_1"},
			{ value: "a1c_o_0_1"},
			{ value: "a1c_o_1_1"},
			{ value: "a1c_o_2_1"},
			{ value: "a1c_o_3_1"}
		];
		var fieldsA3_2_agg = [
			{ value: "a1c_c_0_2"},
			{ value: "a1c_c_1_2"},
			{ value: "a1c_c_2_2"},
			{ value: "a1c_c_3_2"},
			{ value: "a1c_o_0_2"},
			{ value: "a1c_o_1_2"},
			{ value: "a1c_o_2_2"},
			{ value: "a1c_o_3_2"}
		];
		var fieldsB = [
			{ value: "b1_c_0" },
			{ value: "b1_c_1" },
			{ value: "b1_c_2" },
			{ value: "b1_c_3" },
			{ value: "b1_o_0" },
			{ value: "b1_o_1" },
			{ value: "b1_o_2" },
			{ value: "b1_o_3" }
		];
		var fieldsC = [
			{ value: "c1_c_0" },
			{ value: "c1_c_1" },
			{ value: "c1_c_2" },
			{ value: "c1_c_3" },
			{ value: "c1_o_0" },
			{ value: "c1_o_1" },
			{ value: "c1_o_2" },
			{ value: "c1_o_3" }
		];
		var fieldsD = [
			{ value: "d1_c_0" },
			{ value: "d1_c_1" },
			{ value: "d1_c_2" },
			{ value: "d1_c_3" },
			{ value: "d1_o_0" },
			{ value: "d1_o_1" },
			{ value: "d1_o_2" },
			{ value: "d1_o_3" }
		];
		var fieldsD_agg = [
			{ value: "d1_c_0_1" },
			{ value: "d1_c_1_1" },
			{ value: "d1_c_2_1" },
			{ value: "d1_c_3_1" },
			{ value: "d1_o_0_1" },
			{ value: "d1_o_1_1" },
			{ value: "d1_o_2_1" },
			{ value: "d1_o_3_1" }
		];
		var fieldsE1A = [
			{ value: "e1a_c_0" },
			{ value: "e1a_c_1" },
			{ value: "e1a_c_2" },
			{ value: "e1a_c_3" },
			{ value: "e1a_o_0" },
			{ value: "e1a_o_1" },
			{ value: "e1a_o_2" },
			{ value: "e1a_o_3" }
		];
		var fieldsE1A1_agg = [
			{ value: "e1a_c_0_1" },
			{ value: "e1a_c_1_1" },
			{ value: "e1a_c_2_1" },
			{ value: "e1a_c_3_1" },
			{ value: "e1a_o_0_1" },
			{ value: "e1a_o_1_1" },
			{ value: "e1a_o_2_1" },
			{ value: "e1a_o_3_1" }
		];
		var fieldsE1A2_agg = [
			{ value: "e1a_c_0_2" },
			{ value: "e1a_c_1_2" },
			{ value: "e1a_c_2_2" },
			{ value: "e1a_c_3_2" },
			{ value: "e1a_o_0_2" },
			{ value: "e1a_o_1_2" },
			{ value: "e1a_o_2_2" },
			{ value: "e1a_o_3_2" }
		];
		var fieldsE1B = [
			{ value: "e1b_c_0" },
			{ value: "e1b_c_1" },
			{ value: "e1b_c_2" },
			{ value: "e1b_c_3" },
			{ value: "e1b_o_0" },
			{ value: "e1b_o_1" },
			{ value: "e1b_o_2" },
			{ value: "e1b_o_3" }
		];
		var fieldsE1C = [
			{ value: "e1c_c_0" },
			{ value: "e1c_c_1" },
			{ value: "e1c_c_2" },
			{ value: "e1c_c_3" },
			{ value: "e1c_o_0" },
			{ value: "e1c_o_1" },
			{ value: "e1c_o_2" },
			{ value: "e1c_o_3" }
		];
		var fieldsE1C_agg = [
			{ value: "e1c_c_0_1" },
			{ value: "e1c_c_1_1" },
			{ value: "e1c_c_2_1" },
			{ value: "e1c_c_3_1" },
			{ value: "e1c_o_0_1" },
			{ value: "e1c_o_1_1" },
			{ value: "e1c_o_2_1" },
			{ value: "e1c_o_3_1" }
		];
		var fieldsF = [
			{ value: "f1_c_0" },
			{ value: "f1_c_1" },
			{ value: "f1_c_2" },
			{ value: "f1_c_3" },
			{ value: "f1_o_0" },
			{ value: "f1_o_1" },
			{ value: "f1_o_2" },
			{ value: "f1_o_3" }
		];
		var fieldsF_agg = [
			{ value: "f1_c_0_1" },
			{ value: "f1_c_1_1" },
			{ value: "f1_c_2_1" },
			{ value: "f1_c_3_1" },
			{ value: "f1_o_0_1" },
			{ value: "f1_o_1_1" },
			{ value: "f1_o_2_1" },
			{ value: "f1_o_3_1" }
		];

        cat1 = {
          type: "simple-fill", 
          color: [252,233,106, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };

        cat2 = {
          type: "simple-fill", 
          color: [250,209,85, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };

        cat3 = {
          type: "simple-fill", 
          color: [247,190,67, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };

         cat4 = {
          type: "simple-fill", 
          color: [242,167,46, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
         cat5 = {
          type: "simple-fill", 
          color: [207,122,31, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
         cat6 = {
          type: "simple-fill", 
          color: [173,83,19, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
        cat7 = {
          type: "simple-fill", 
          color: [138,46,10, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
        cat8 = {
          type: "simple-fill", 
          color: [107,0,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };       
        
		
		dif1 = {
          type: "simple-fill", 
          color: [255,34,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };

        dif2 = {
          type: "simple-fill", 
          color: [255,85,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };

        dif3 = {
          type: "simple-fill", 
          color: [255,128,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };

         dif4 = {
          type: "simple-fill", 
          color: [255,162,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
         dif5 = {
          type: "simple-fill", 
          color: [255,200,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
         dif6 = {
          type: "simple-fill", 
          color: [255,238,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
        dif7 = {
          type: "simple-fill", 
          color: [255,255,255, 0],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        };
        
        dif8 = {
          type: "simple-fill", 
          color: [183,219,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		
		dif9 = {
          type: "simple-fill", 
          color: [164,196,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		
		dif10 = {
          type: "simple-fill", 
          color: [122,171,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		
		dif11 = {
          type: "simple-fill", 
          color: [85,145,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		
		dif12 = {
          type: "simple-fill", 
          color: [48,120,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		dif13 = {
          type: "simple-fill", 
          color: [0,97,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		dif14 = {
          type: "simple-fill", 
          color: [0,97,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 
		
		dif15 = {
          type: "simple-fill", 
          color: [0,97,0, 0.7],
          style: "solid",
          outline: {
            width: 0.2,
            color: [255, 255, 255, 0.5]
          }
        }; 

        renderer_A1= {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "a1a_c_0",
          legendOptions: {
            title: "Eficiència energètica (EFEROI)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
		  
            {
              minValue: 7, maxValue: 15,symbol: cat8,label: ">7 "
            },
            {
              minValue: 6.0001,maxValue: 7,symbol: cat7,label: "6 - 7"
            },
            {
              minValue:5.0001, maxValue: 6,symbol: cat6,label: "5 - 6"
            },
            {
              minValue: 4.0001, maxValue: 5,symbol: cat5,label: "4 - 5"
            },
            {
              minValue: 3.0001,maxValue: 4, symbol: cat4,label: "3 - 4"
            },
            {
              minValue: 2.0001, maxValue: 3,symbol: cat3, label: "2 - 3"
            },
            {
              minValue: 1.00001, maxValue: 2, symbol: cat2, label: "1 - 2"
            },
            {
              minValue: 0.000001, maxValue: 1, symbol: cat1, label: "0 - 1 "
            }
            
          ]
        };
        
        renderer_A2= {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "a1b_c_0",
          legendOptions: {
            title: "Consum d'aigua"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
		  
            {
              minValue:250.0001, maxValue: 1000,symbol: cat8,label: ">250"
            },
            {
              minValue: 200.0001, maxValue: 250,symbol: cat7,label: "200 - 250"
            },
            {
              minValue: 150.0001,maxValue: 200, symbol: cat4,label: "150 - 200"
            },
            {
              minValue: 100.0001, maxValue: 150,symbol: cat3, label: "100 - 150"
            },
            {
              minValue: 50.00001, maxValue: 100, symbol: cat2, label: "50 - 100"
            },
            {
              minValue: 0.000001, maxValue: 50, symbol: cat1, label: "0 - 50 "
            }
            
          ]
        };
        
        renderer_A3= {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "a1c_c_0",
          legendOptions: {
            title: "Apropiació de la producció primària neta"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
		  
            {
              minValue: 35, maxValue: 100,symbol: cat8,label: ">35 "
            },
            {
              minValue: 30.0001,maxValue: 35,symbol: cat7,label: "30 - 35"
            },
            {
              minValue:25.0001, maxValue: 30,symbol: cat6,label: "25 - 30"
            },
            {
              minValue: 20.0001, maxValue: 25,symbol: cat5,label: "20 - 25"
            },
            {
              minValue: 15.0001,maxValue: 20, symbol: cat4,label: "15 - 20"
            },
            {
              minValue: 10.0001, maxValue: 15,symbol: cat3, label: "10 - 15"
            },
            {
              minValue: 5.00001, maxValue: 10, symbol: cat2, label: "5 - 10"
            },
            {
              minValue: 0.000001, maxValue: 5, symbol: cat1, label: "0 - 5 "
            }
            
          ]
        };
		
		renderer_B = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "b1_c_0",
          legendOptions: {
            title: "Integració energia-paisatge (ELIA)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
            {
              minValue: 0.70001, maxValue: 1,symbol: cat8,label: "> 0.7 "
            },
            {
              minValue: 0.60001,maxValue: 0.7,symbol: cat7,label: "0.6 - 0.7 "
            },
            {
              minValue: 0.5001, maxValue: 0.6,symbol: cat6,label: "0.5 - 0.6 "
            },
            {
              minValue: 0.40001, maxValue: 0.5,symbol: cat5,label: "0.4 - 0.5 "
            },
            {
              minValue: 0.30001,maxValue: 0.4, symbol: cat4,label: "0.3 - 0.4 "
            },
            {
              minValue: 0.20001, maxValue: 0.3,symbol: cat3, label: "0.2 - 0.3 "
            },
            {
              minValue: 0.100001, maxValue: 0.2, symbol: cat2, label: "0.1 - 0.2 "
            },
			{
              minValue: 0.05001, maxValue: 0.1, symbol: cat1, label: "0.05 - 0.1 "
            }
            
            
          ]
        };
		
		renderer_C = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "c1_c_0",
          legendOptions: {
            title: "Complexitat paisatgística (Le)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 0.60001,maxValue: 0.8,symbol: cat7,label: "> 0.60 "
            },
            {
              minValue: 0.5001, maxValue: 0.6,symbol: cat6,label: "0.5 - 0.6 "
            },
            {
              minValue: 0.40001, maxValue: 0.5,symbol: cat5,label: "0.4 - 0.5 "
            },
            {
              minValue: 0.30001,maxValue: 0.4, symbol: cat4,label: "0.3 - 0.4 "
            },
            {
              minValue: 0.20001, maxValue: 0.3,symbol: cat3, label: "0.2 - 0.3 "
            },
            {
              minValue: 0.100001, maxValue: 0.2, symbol: cat2, label: "0.1 - 0.2 "
            },
            {
              minValue: 0.05001, maxValue: 0.1, symbol: cat1, label: "0.05 - 0.1 "
            }
            
            
          ]
        };
		
		renderer_D = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "d1_c_0",
          legendOptions: {
            title: "Emissions de gasos d'efecte hivernacle (MJ)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 38.40001,maxValue: 55,symbol: cat7,label: "> 38 "
            },
            {
              minValue: 27.0001, maxValue: 38,symbol: cat6,label: "27 - 38 "
            },
            {
              minValue: 17.80001, maxValue: 27,symbol: cat5,label: "17.8 - 27 "
            },
            {
              minValue: 10.30001,maxValue: 17.8, symbol: cat4,label: "10.3 - 17.8 "
            },
            {
              minValue: 5.20001, maxValue: 10.3,symbol: cat3, label: "5.2 - 10.3 "
            },
            {
              minValue: 1.600001, maxValue: 5.2, symbol: cat2, label: "1.6 - 5.2 "
            },
            {
              minValue: 0.00001, maxValue: 1.6, symbol: cat1, label: "0 - 1.6 "
            }
          ]
        };
		
		renderer_E1A = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "e1a_c_0",
          legendOptions: {
            title: "Recirculació de nutrients (% rP)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
            {
              minValue: 87.501,maxValue: 105,symbol: cat8,label: "87.5 - 100"
            },
            {
              minValue: 75.001,maxValue: 87.5,symbol: cat7,label: "75 - 87.5"
            },
            {
              minValue: 62.501, maxValue: 75,symbol: cat6,label: "62.5 - 75"
            },
            {
              minValue: 50.001, maxValue: 62.5,symbol: cat5,label: "50 - 62.5"
            },
            {
              minValue: 37.501,maxValue: 50, symbol: cat4,label: "37.5 - 50"
            },
            {
              minValue: 25.001, maxValue: 37.5,symbol: cat3, label: "25 - 37.5"
            },
            {
              minValue: 12.501, maxValue: 25, symbol: cat2, label: "12.5 - 25 "
            },
            {
              minValue: 0.5001, maxValue: 12.5, symbol: cat1, label: "0 - 12.5"
            }
            
          ]
        };
		
		renderer_E1B = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "e1b_c_0",
          legendOptions: {
            title: "Embornal de carboni (t C)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 3000.001,maxValue: 6000,symbol: cat7,label: "> 3000 "
            },
            {
              minValue: 2500.001, maxValue: 3000,symbol: cat6,label: "2500 - 3000 "
            },
            {
              minValue: 2000.001, maxValue: 2500,symbol: cat5,label: "2000 - 2500  "
            },
            {
              minValue: 1500.001,maxValue: 2000, symbol: cat4,label: "1500 - 2000 "
            },
            {
              minValue: 1000.001, maxValue: 1500,symbol: cat3, label: "1000 - 1500 "
            },
            {
              minValue: 500.001, maxValue: 1000, symbol: cat2, label: "500 - 1000 "
            },
            {
              minValue: 0.5001, maxValue: 500, symbol: cat1, label: "0 - 500 "
            }
          ]
        };
		
		renderer_E1C = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "e1c_c_0",
          legendOptions: {
            title: "Producció d'aliments (kg ms)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 8000.001,maxValue: 15000,symbol: cat7,label: "> 8000"
            },
            {
              minValue: 4000.001, maxValue: 8000,symbol: cat6,label: "4000 - 8000"
            },
            {
              minValue: 2000.001, maxValue: 4000,symbol: cat5,label: "2000 - 4000"
            },
            {
              minValue: 1000.001,maxValue: 2000, symbol: cat4,label: "1000 - 2000"
            },
            {
              minValue: 500.001, maxValue: 1000,symbol: cat3, label: "500 - 1000"
            },
            {
              minValue: 250.001, maxValue: 500, symbol: cat2, label: "250 - 500"
            },
            {
              minValue: 0.0001, maxValue: 250, symbol: cat1, label: "0 - 250"
            } 
          ]
        };
		
		renderer_F = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: "f1_c_0",
          legendOptions: {
            title: "Llocs de treball (UTA)"
          },
          defaultSymbol: {
            type: "simple-fill", 
            color: "white",
            style: "none",
            outline: {
              width: 0,
              color: [50, 50, 50, 0.6]
            }
          },
          defaultLabel: "no data",
          classBreakInfos: [
			{
              minValue: 6.4,maxValue: 12,symbol: cat7,label: "> 6.4 "
            },
            {
              minValue: 3.2001,maxValue: 6.4,symbol: cat7,label: "3.2 - 6.4 "
            },
            {
              minValue: 1.6001, maxValue: 3.2,symbol: cat6,label: "1.6 - 3.2 "
            },
            {
              minValue: 0.8001, maxValue: 1.6,symbol: cat5,label: "0.8 - 1.6 "
            },
            {
              minValue: 0.4001,maxValue: 0.8, symbol: cat4,label: "0.4 - 0.8 "
            },
            {
              minValue: 0.2001, maxValue: 0.4,symbol: cat3, label: "0.2 - 0.4 "
            },
            {
              minValue: 0.1001, maxValue: 0.2, symbol: cat2, label: "0.1 - 0.2 "
            },
            {
              minValue: 0.0101, maxValue: 0.1, symbol: cat1, label: "0 - 0.1 "
            }
          ]
        };

		
		renderer_dif_A1 = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression:  "Max"+fields_A1+" - $feature.a1a_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 6.001,maxValue: 15,symbol: dif12,label: ">6"
            },
			{
              minValue: 4.001,maxValue: 6,symbol: dif11,label: "4 - 6"
            },
			{
              minValue: 2.001,maxValue: 4,symbol: dif10,label: "2 - 4"
            },
			{
              minValue: 1.001,maxValue: 2,symbol: dif9,label: "1 - 2"
            },
			{
              minValue: 0.05001,maxValue: 1,symbol: dif8,label: "0 - 1"
            },
            {
              minValue: -0.4999,maxValue: 0.05,symbol: dif7,label: "0 "
            },
            {
              minValue: -0.999, maxValue: -0.05,symbol: dif6,label: "-1 - 0"
            },
            {
              minValue: -1.999, maxValue: -1,symbol: dif5,label: "-2 - -1"
            },
            {
              minValue: -3.999,maxValue: -2, symbol: dif4,label: "-4 -  -2"
            },
            {
              minValue: -5.999, maxValue: -4,symbol: dif3, label: "-6 - -4"
            },
            {
              minValue: -7.9999, maxValue: -6, symbol: dif2, label: "-8 - -6"
            },
            {
              minValue: -10, maxValue: -8, symbol: dif1, label: "< -8 "
            }
          ]
        };
		renderer_dif_A2 = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression:  "Max"+fields_A2+" - $feature.a1b_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
            {
              minValue: 60.001,maxValue: 100,symbol: dif14,label: ">60"
            },
          	{
              minValue: 50.001,maxValue: 60,symbol: dif13,label: "50 - 60"
            },
			{
              minValue: 40.001,maxValue: 50,symbol: dif12,label: "40 - 50"
            },
			{
              minValue: 30.001,maxValue: 40,symbol: dif11,label: "30 - 40"
            },
			{
              minValue: 20,maxValue: 30,symbol: dif10,label: "20 - 30"
            },
			{
              minValue: 10.001,maxValue: 20,symbol: dif9,label: "10 - 20"
            },
			{
              minValue: 0.00001,maxValue: 10,symbol: dif8,label: "0 - 10"
            }
   
          ]
        };
        renderer_dif_A3 = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression:  "Max"+fields_A3+" - $feature.a1c_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			 {
              minValue: 72,maxValue: 100,symbol: dif14,label: "> 72"
            },
          	{
              minValue: 54.001,maxValue: 72,symbol: dif13,label: "54 - 72"
            },
			{
              minValue: 38.901,maxValue: 54,symbol: dif12,label: "38.9 - 54"
            },
			{
              minValue: 25.901,maxValue: 38.9,symbol: dif11,label: "25.9 - 38.9"
            },
			{
              minValue: 14.001,maxValue: 25.9,symbol: dif10,label: "14 - 25.9"
            },
			{
              minValue: 4.501,maxValue: 14,symbol: dif9,label: "4.5 - 14"
            },
			{
              minValue: 0.00001,maxValue: 4.5,symbol: dif8,label: "0 - 4.5"
            }
          ]
        };
		renderer_dif_B = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_B+" - $feature.b1_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
		  {
              minValue: 0.5001,maxValue:1,symbol: dif13,label: ">0.5"
            },
			{
              minValue: 0.4001,maxValue: 0.5,symbol: dif12,label: "0.4 - 0.5 "
            },
			{
              minValue: 0.3001,maxValue: 0.4,symbol: dif11,label: "0.3 - 0.4 "
            },
			{
              minValue: 0.2001,maxValue: 0.3,symbol: dif10,label: "0.2 - 0.3 "
            },
			{
              minValue: 0.1001,maxValue: 0.2,symbol: dif9,label: "0.1 - 0.2 "
            },
			{
              minValue: 0.05001,maxValue: 0.1,symbol: dif8,label: "0 - 0.1 "
            },
            {
              minValue: -0.0999,maxValue: 0.02,symbol: dif7,label: "0 "
            },
            {
              minValue: -0.0999, maxValue: -0.1,symbol: dif6,label: "-0.1 - 0"
            },
            {
              minValue: -0.1999, maxValue: -0.1,symbol: dif5,label: "-0.2 - -0.1"
            },
            {
              minValue: -0.2999,maxValue: -0.1, symbol: dif4,label: "-0.3 - 0.2"
            },
            {
              minValue: -0.3999, maxValue: -0.2,symbol: dif3, label: "-0.4 - -0.3"
            },
            {
              minValue: -0.4999, maxValue: -0.4, symbol: dif2, label: "-0.5 - -0.4 "
            },
            {
              minValue: -8, maxValue: -0.5, symbol: dif1, label: "< -0.5"
            }
          ]
        };
		
		renderer_dif_C = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_C+" - $feature.c1_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 0.2001,maxValue: 0.5,symbol: dif13,label: "> 0.2"
            },
			{
              minValue: 0.1001,maxValue: 0.2,symbol: dif11,label: "0.1 - 0.2 "
            },
			{
              minValue: 0.03001,maxValue: 0.1,symbol: dif9,label: "0 - 0.1 "
            },
            {
              minValue: 0.0299,maxValue: 0.03,symbol: dif7,label: "0 "
            },
            {
              minValue: -0.0999, maxValue: -0.03,symbol: dif6,label: "-0.1 - 0"
            },
            {
              minValue: -0.1999, maxValue: -0.1,symbol: dif5,label: "-0.2 - -0.1"
            },
            {
              minValue: -0.2999,maxValue: -0.2, symbol: dif4,label: "-0.3 - 0.2"
            },
            {
              minValue: -0.3999, maxValue: -0.3,symbol: dif2, label: "-0.4 - -0.3"
            },
            {
              minValue: -1, maxValue: -0.4, symbol: dif1, label: "< -0.4"
            }
          ]
        };
		
		
		renderer_dif_D = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_D+" - $feature.d1_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 37.001,maxValue: 100,symbol: dif15,label: ">37"
            },
			{
              minValue: 24,maxValue: 37,symbol: dif14,label: "24 - 37"
            },
			{
              minValue: 15.001,maxValue: 24,symbol: dif13,label: "15 - 24 "
            },
			{
              minValue: 10.001,maxValue: 15,symbol: dif12,label: "10 - 15"
            },
			{
              minValue: 6.001,maxValue: 10,symbol: dif11,label: "6 - 10"
            },
			{
              minValue: 2.001,maxValue: 6,symbol: dif10,label: "2 - 6"
            },
			{
              minValue: 0.001,maxValue: 1.9,symbol: dif9,label: "0 - 2"
            }
          ]
        };
		
		
		renderer_dif_E1A = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_E1A+" - $feature.e1a_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 90.001,maxValue: 100,symbol: dif15,label: "90 - 100"
            },
			{
              minValue: 75.001,maxValue: 90,symbol: dif14,label: "75 - 90"
            },
			{
              minValue: 60.001,maxValue: 75,symbol: dif13,label: "60 - 75"
            },
			{
              minValue: 45.001,maxValue: 60,symbol: dif12,label: "45 - 60"
            },
			{
              minValue: 30.001,maxValue: 45,symbol: dif11,label: "30 - 45"
            },
			{
              minValue: 15.001,maxValue: 30,symbol: dif10,label: "15 - 30"
            },
			{
              minValue: 0.051,maxValue: 15,symbol: dif9,label: "0- 15"
            },
			{
              minValue: -0.049, maxValue: 0.05, symbol: dif8,label: "0"
            },
			{
              minValue: -14.99, maxValue: -0.05, symbol: dif7,label: "-15 - 0"
            },
			{
              minValue: -29.99, maxValue: -15, symbol: dif6,label: "-30 - -15"
            },
			{
              minValue: -44.99, maxValue: -30, symbol: dif5,label: "-45 - -30"
            },
            {
              minValue: -59.99, maxValue: -45, symbol: dif4,label: "-60- -45"
            },
            {
              minValue: -74.999,maxValue: -60, symbol: dif3,label: "-75 - 60"
            },
            {
              minValue: -89.99, maxValue: -75,symbol: dif2, label: "-90 - -75"
            },
            {
              minValue: -5000, maxValue: -90, symbol: dif1, label: "-100 - -90"
            }
          ]
        };
		
		renderer_dif_E1B = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_E1B+" - $feature.e1b_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 250.001,maxValue: 800,symbol: dif9,label: "> 250"
            },
			{
              minValue: 125.001,maxValue: 250,symbol: dif8,label: "125 - 250"
            },
			{
              minValue: 25.001,maxValue: 125,symbol: dif7,label: "0 - 125"
            },
			{
              minValue: -24.999,maxValue: 25,symbol: dif6,label: "0"
            },
			{
              minValue:-124.999,maxValue: -25,symbol: dif5,label: "-125 - 0"
            },
            {
              minValue: -249.99, maxValue: -125, symbol: dif4,label: "-250 - -125"
            },
            {
              minValue: -499.999,maxValue: -250, symbol: dif3,label: "-500 - -250"
            },
            {
              minValue: -999.99, maxValue: -500,symbol: dif2, label: "-1.000 - 500"
            },
            {
              minValue: -1547.99, maxValue: -1000, symbol: dif1, label: "< -1.000"
            }
          ]
        };
		
		renderer_dif_E1C = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_E1C+" - $feature.e1c_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 4000.001,maxValue: 50000,symbol: dif15,label: ">4000"
            },
			{
              minValue: 2000.001,maxValue: 4000,symbol: dif14,label: "20000 - 4000"
            },
			{
              minValue: 1000.001,maxValue: 2000,symbol: dif13,label: "1000 - 2000"
            },
			{
              minValue: 500,maxValue: 1000,symbol: dif12,label: "500 - 1000"
            },
			{
              minValue: 250.001,maxValue: 500,symbol: dif11,label: "250 - 500"
            },
			{
              minValue: 125.001,maxValue: 250,symbol: dif10,label: "125 - 250"
            },
			{
              minValue: 3.001,maxValue: 125,symbol: dif9,label: "0 - 125"
            },
			{
              minValue:-2.99,maxValue: 3,symbol: dif8,label: "0"
            },
			{
              minValue: -124.99,maxValue: -3,symbol: dif7,label: "-125 - 0"
            },
            {
              minValue: -249.99,maxValue: -125,symbol: dif6,label: "-250 - -125"
            },
            {
              minValue: -499.99, maxValue: -250,symbol: dif5,label: "-500 - -250"
            },
            {
              minValue: -999.99, maxValue: -500,symbol: dif4,label: "-1000 - -500"
            },
            {
              minValue: -1999.999,maxValue: -1000, symbol: dif3,label: "-2000 - -1000"
            },
            {
              minValue: -3999.99, maxValue: -2000,symbol: dif2, label: "-4000 - -2000"
            },
            {
              minValue: -38114, maxValue: -4000, symbol: dif1, label: "<-4000"
            }
          ]
        };
		
		renderer_dif_F = {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          valueExpression: "Max"+fields_F+" - $feature.f1_c_0",
          legendOptions: {
            title: "Diferència"
          },
          defaultSymbol: {
            type: "simple-fill", 
            style: "none",
            outline: {
              width: 0
            }
          },
          defaultLabel: "sense dades",
          classBreakInfos: [
			{
              minValue: 12.8001,maxValue: 17,symbol: dif15,label: ">12.8"
            },
			{
              minValue: 6.4001,maxValue: 12.8,symbol: dif14,label: "6.4 - 12.8"
            },
			{
              minValue: 3.2001,maxValue: 6.4,symbol: dif13,label: "3.2 - 6.4"
            },
			{
              minValue: 1.6001,maxValue: 3.2,symbol: dif12,label: "1.6 - 3.2"
            },
			{
              minValue: 0.8001,maxValue: 1.6,symbol: dif11,label: "0.8 - 1.6"
            },
			{
              minValue: 0.4001,maxValue: 0.8,symbol: dif10,label: "0.4 - 0.8"
            },
			{
              minValue: 0.2001,maxValue: 0.4,symbol: dif9,label: "0.2 - 0.4"
            },
			{
              minValue:0.001,maxValue: 0.2,symbol: dif8,label: "0 - 0.2"
            },
			{
              minValue: -0.0099,maxValue: 0.010,symbol: dif7,label: "0"
            },
            {
              minValue: -0.199,maxValue: -0.010,symbol: dif6,label: "-0.2 - 0"
            },
            {
              minValue: -0.399, maxValue: -0.2,symbol: dif5,label: "-0.4 - -0.2"
            },
            {
              minValue: -0.7999, maxValue: -0.4,symbol: dif4,label: "-0.8 - -0.4"
            },
            {
              minValue: -1.9999,maxValue: -0.8, symbol: dif3,label: "-1.6 - -0.8"
            },
            {
              minValue: -3.9999, maxValue: -1.6,symbol: dif2, label: "-3.2 - -1.6"
            },
            {
              minValue: -4.35, maxValue: -3.2, symbol: dif1, label: "<-3.2"
            }
          ]
		};

		 function canvi(weightListIndicators, value){
			//var e1 = document.getElementById("field-select");
			//var text_indicador = e1.options[e1.selectedIndex].text;
			//document.getElementById("titol").innerHTML = "Resultats optimitzant la dimensió: " + text_indicador;
			//tipus = document.getElementById("tipus").value;
			//escenari = document.getElementById("escenari_id").value;
			//indicador_principal = "fields" + document.getElementById("field-select").value;
			//var e = document.getElementById("escenari_id");
			//var text_escenari = e.options[e.selectedIndex].text;
			//document.getElementById("escenariDif").innerHTML = "Diferència escenari " + text_escenari + " i Optimitzat";
			//if (derivat) document.getElementById("field-select-ind").value = "A1";
			var cbs = document.getElementsByClassName("cbs");
			for(var i = 0; i<cbs.length; i++){
				cbs[i].checked = false;
			}
			
			if(value == null){
				value = "A1";
				document.getElementById("A1").checked = true;
				var text_selected = document.getElementById("labelA1").textContent;
			}else{
				document.getElementById(value).checked = true;
				var text_selected = document.getElementById("label"+value).textContent;

			}

			var count_selectef = document.getElementsByClassName("map--selected");

			for(var i = 0; i<count_selectef.length; i++){
				
				var text = document.createTextNode(text_selected)
				count_selectef.item(i).innerHTML = text_selected;
			}
			var indicador = value;
			switch (indicador){
			case "A1":
				cat1.color = [252,233,106, 0.7];
				cat2.color = [250,209,85, 0.7];
				cat3.color = [247,190,67, 0.7];
				cat4.color = [242,167,46, 0.7];
				cat5.color = [207,122,31, 0.7];
				cat6.color = [173,83,19, 0.7];
				cat7.color = [138,46,10, 0.7];
				cat8.color = [107,0,0, 0.7];
				dif1.color = [255,34,0, 0.7];
				dif2.color = [255,85,0, 0.7];
				dif3.color = [255,128,0, 0.7];
				dif4.color = [255,162,0, 0.7];
				dif5.color = [255,200,0, 0.7];
				dif6.color = [255,238,0, 0.7];
				dif7.color = [255,255,255, 0];
				dif7.outline.width=0;
				dif8.color = [183,219,0, 0.7];
				dif9.color = [164,196,0, 0.7];
				dif10.color = [122,171,0, 0.7];
				dif11.color = [85,145,0, 0.7];
				dif12.color = [48,120,0, 0.7];
				renderer_A1.field ="a1a_c_0";
				layerEscenari.renderer = renderer_A1;
				renderer_A1.field ="a1a_c_1";
				layerEscenariTendencial.renderer = renderer_A1;
				renderer_max_A1 = {type: "class-breaks"};
				renderer_max_A1.classBreakInfos = renderer_A1.classBreakInfos;
				renderer_dif_A1.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsA1,[" + weightListIndicators + "]) - $feature.a1a_c_0";
				renderer_max_A1.valueExpression = document.getElementById("arcadeB").text + " getValue(fieldsA1,[" + weightListIndicators + "]);";
				layer4.renderer = renderer_dif_A1;
				layer3.renderer = renderer_max_A1;
				renderer_dif_A1.valueExpression = document.getElementById("arcadeB").text + " getValue(fieldsA1,[" + weightListIndicators + "]) - $feature.a1a_c_1";
				layerDiferenciaEscenariTendencial.renderer = renderer_dif_A1;
				break;
			case "A2":
				cat1.color = [252,233,106, 0.7];
				cat2.color = [250,209,85, 0.7];
				cat3.color = [247,190,67, 0.7];
				cat4.color = [242,167,46, 0.7];
				cat5.color = [207,122,31, 0.7];
				cat6.color = [173,83,19, 0.7];
				cat7.color = [138,46,10, 0.7];
				cat8.color = [107,0,0, 0.7];
				dif1.color = [255,34,0, 0.7];
				dif2.color = [255,85,0, 0.7];
				dif3.color = [255,128,0, 0.7];
				dif4.color = [255,162,0, 0.7];
				dif5.color = [255,200,0, 0.7];
				dif6.color = [255,238,0, 0.7];
				dif7.color = [255,255,255, 0];
				dif7.outline.width=0;
				dif8.color = [183,219,0, 0.7];
				dif9.color = [164,196,0, 0.7];
				dif10.color = [122,171,0, 0.7];
				dif11.color = [85,145,0, 0.7];
				dif12.color = [48,120,0, 0.7];
				renderer_A2.field = "a1b_c_0";
				layerEscenari.renderer = renderer_A2;
				renderer_A2.field = "a1b_c_1";
				layerEscenariTendencial.renderer = renderer_A2;
				renderer_max_A2 = {type: "class-breaks"};
				renderer_max_A2.classBreakInfos = renderer_A2.classBreakInfos;
				renderer_dif_A2.valueExpression= document.getElementById("arcadeB").text + " $feature.a1b_c_0" + " - getValue(fieldsA2,[" + weightListIndicators + "]);";
				renderer_max_A2.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsA2,[" + weightListIndicators + "]);";
				layer4.renderer = renderer_dif_A2;
				layer3.renderer = renderer_max_A2;
				renderer_dif_A2.valueExpression= document.getElementById("arcadeB").text + " $feature.a1b_c_1" + " - getValue(fieldsA2,[" + weightListIndicators + "]);";
				layerDiferenciaEscenariTendencial.renderer = renderer_dif_A2;
				break;
			case "A3":
				cat1.color = [252,233,106, 0.7];
				cat2.color = [250,209,85, 0.7];
				cat3.color = [247,190,67, 0.7];
				cat4.color = [242,167,46, 0.7];
				cat5.color = [207,122,31, 0.7];
				cat6.color = [173,83,19, 0.7];
				cat7.color = [138,46,10, 0.7];
				cat8.color = [107,0,0, 0.7];
				dif1.color = [255,34,0, 0.7];
				dif2.color = [255,85,0, 0.7];
				dif3.color = [255,128,0, 0.7];
				dif4.color = [255,162,0, 0.7];
				dif5.color = [255,200,0, 0.7];
				dif6.color = [255,238,0, 0.7];
				dif7.color = [255,255,255, 0];
				dif7.outline.width=0;
				dif8.color = [183,219,0, 0.7];
				dif9.color = [164,196,0, 0.7];
				dif10.color = [122,171,0, 0.7];
				dif11.color = [85,145,0, 0.7];
				dif12.color = [48,120,0, 0.7];
				renderer_A3.field ="a1c_c_0";
				layerEscenari.renderer = renderer_A3;
				renderer_A3.field ="a1c_c_1";
				layerEscenariTendencial.renderer = renderer_A3;
				renderer_max_A3 = {type: "class-breaks"};
				renderer_max_A3.classBreakInfos = renderer_A3.classBreakInfos;
				renderer_dif_A3.valueExpression= document.getElementById("arcadeB").text + " $feature.a1c_c_0" + " - getValue(fieldsA3,[" + weightListIndicators + "]);";
				renderer_max_A3.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsA3,[" + weightListIndicators + "]);";
				layer4.renderer = renderer_dif_A3;
				layer3.renderer = renderer_max_A3;
				renderer_dif_A3.valueExpression= document.getElementById("arcadeB").text + " $feature.a1c_c_1" + " - getValue(fieldsA3,[" + weightListIndicators + "]);";
				layerDiferenciaEscenariTendencial.renderer = renderer_dif_A3;
				break;
			case "B": 
				cat1.color = [204,237,217, 0.7];
				cat2.color = [171,212,185, 0.7];
				cat3.color = [141,186,153, 0.7];
				cat4.color = [118,168,130, 0.7];
				cat5.color = [84,133,94, 0.7];
				cat6.color = [58,105,68, 0.7];
				cat7.color = [38,84,49, 0.7];
				cat8.color = [19,56,28, 0.7];
				dif1.color = [255,34,0, 0.7];
				dif2.color = [255,85,0, 0.7];
				dif3.color = [255,128,0, 0.7];
				dif4.color = [255,162,0, 0.7];
				dif5.color = [255,200,0, 0.7];
				dif6.color = [255,238,0, 0.7];
				dif7.color = [255,255,255, 0];
				dif7.outline.width=0;
				dif8.color = [183,219,0, 0.7];
				dif9.color = [164,196,0, 0.7];
				dif10.color = [122,171,0, 0.7];
				dif11.color = [85,145,0, 0.7];
				dif12.color = [48,120,0, 0.7];
				dif13.color = [0,97,0, 0.7];
				renderer_B.field ="b1_c_0";
				layerEscenari.renderer = renderer_B;	
				renderer_B.field ="b1_c_1";
				layerEscenariTendencial.renderer = renderer_B;			
				renderer_max_B = {type: "class-breaks"};
				renderer_max_B.classBreakInfos = renderer_B.classBreakInfos;
				renderer_dif_B.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsB,[" + weightListIndicators + "]) - $feature.b1_c_0;";
				renderer_max_B.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsB,[" + weightListIndicators + "]);";
				layer4.renderer = renderer_dif_B;
				layer3.renderer = renderer_max_B;
				renderer_dif_B.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsB,[" + weightListIndicators + "]) - $feature.b1_c_1;";
				layerDiferenciaEscenariTendencial.renderer = renderer_dif_B;
				break;
			case "C": 
				cat1.color = [252,228,104, 0.7];
				cat2.color = [250,205,80, 0.7];
				cat3.color = [245,179,56, 0.7];
				cat4.color = [224,144,38, 0.7];
				cat5.color = [181,94,24, 0.7];
				cat6.color = [145,51,10, 0.7];
				cat7.color = [107,0,0, 0.7];
				dif1.color = [255,34,0, 0.7];
				dif2.color = [255,85,0, 0.7];
				dif4.color = [255,162,0, 0.7];
				dif5.color = [255,200,0, 0.7];
				dif6.color = [255,238,0, 0.7];
				dif7.color = [255,255,255, 0];
				dif7.outline.width=0;
				dif9.color = [164,196,0, 0.7];
				dif11.color = [85,145,0, 0.7];
				dif13.color = [0,97,0, 0.7];
				renderer_C.field ="c1_c_0";
				layerEscenari.renderer = renderer_C;
				renderer_C.field ="c1_c_1";
				layerEscenariTendencial.renderer = renderer_C;
				renderer_max_C = {type: "class-breaks"};
				renderer_max_C.classBreakInfos = renderer_C.classBreakInfos;				
				renderer_dif_C.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsC,[" + weightListIndicators + "]) - $feature.c1_c_0;";
				renderer_max_C.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsC,[" + weightListIndicators + "]);";
				layer4.renderer = renderer_dif_C;
				layer3.renderer = renderer_max_C;	
				renderer_dif_C.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsC,[" + weightListIndicators + "]) - $feature.c1_c_1;";
				layerDiferenciaEscenariTendencial.renderer = renderer_dif_C;			
				break;
			case "D": 
				cat1.color = [242,207,182, 0.7];
				cat2.color = [232,179,151, 0.7];
				cat3.color = [222,155,124, 0.7];
				cat4.color = [208,130,98, 0.7];
				cat5.color = [199,108,76, 0.7];
				cat6.color = [184,84,55, 0.7];
				cat7.color = [171,65,36, 0.7];
				dif1.color = [0,97,0, 0.7];
				dif2.color = [43,117,0, 0.7];
				dif4.color = [103,158,0,0.7];
				dif8.color = [255,255,255,0];
				dif8.outline.width=0;
				dif9.color = [255,229,90,0.7];
				dif10.color = [255,200,0,0.7];
				dif11.color = [255,166,0,0.7];
				dif12.color = [255,140,0,0.7];
				dif13.color = [255,111,0,0.7];
				dif14.color = [255,77,0,0.7];
				dif15.color = [255,38,0,0.7];
				renderer_D.field ="d1_c_0";
				layerEscenari.renderer = renderer_D;
				renderer_D.field ="d1_c_1";
				layerEscenariTendencial.renderer = renderer_D;
				renderer_max_D = {type: "class-breaks"};
				renderer_max_D.classBreakInfos = renderer_D.classBreakInfos;
				renderer_dif_D.valueExpression= document.getElementById("arcadeB").text + "$feature.d1_c_0 - getValue(fieldsD,[" + weightListIndicators + "]);";
				renderer_max_D.valueExpression= document.getElementById("arcadeB").text + "getValue(fieldsD,[" + weightListIndicators + "]);";
				layer4.renderer = renderer_dif_D;
				layer3.renderer = renderer_max_D;
				renderer_dif_D.valueExpression= document.getElementById("arcadeB").text + "$feature.d1_c_1 - getValue(fieldsD,[" + weightListIndicators + "]);";
				layerDiferenciaEscenariTendencial.renderer = renderer_dif_D;
				break;
			case "E1A": 
				cat1.color = [149,209,237, 0.7];
				cat2.color = [116,180,232, 0.7];
				cat3.color = [80,155,230, 0.7];
				cat4.color = [31,131,224, 0.7];
				cat5.color = [33,98,204, 0.7];
				cat6.color = [39,68,184, 0.7];
				cat7.color = [23,40,166, 0.7];
				cat8.color = [35,35,145, 0.7];
				dif1.color = [255,38,0,0.7];
				dif2.color = [255,77,0,0.7];
				dif3.color = [255,111,0,0.7];
				dif4.color = [255,140,0,0.7];
				dif5.color = [255,166,0,0.7];
				dif6.color = [255,200,0,0.7];
				dif7.color = [255,229,90,0.7];
				dif8.color = [255,255,255,0];
				dif3.outline.width=0;
				dif9.color = [183,219,0,0.7];
				dif10.color = [153,199,0, 0.7];
				dif11.color = [122,178,0, 0.7];
				dif12.color = [92,158,0, 0.7];
				dif13.color = [61,138,0, 0.7];
				dif14.color = [31,117,0, 0.7];
				dif15.color = [0,97,0, 0.7];
				renderer_E1A.field ="e1a_c_0";
				layerEscenari.renderer = renderer_E1A;
				renderer_E1A.field ="e1a_c_1";
				layerEscenariTendencial.renderer = renderer_E1A;
				renderer_max_E1A = {type: "class-breaks"};
				renderer_max_E1A.classBreakInfos = renderer_E1A.classBreakInfos;
				renderer_dif_E1A.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsE1A,[" + weightListIndicators + "]) - $feature.e1a_c_0;";
				renderer_max_E1A.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsE1A,[" + weightListIndicators + "]) * " + weightListIndicators[6];
				layer4.renderer = renderer_dif_E1A;
				layer3.renderer = renderer_max_E1A;
				renderer_dif_E1A.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsE1A,[" + weightListIndicators + "]) - $feature.e1a_c_1;";
				layerDiferenciaEscenariTendencial.renderer = renderer_dif_E1A;
				break;
			case "E1B": 
				cat1.color = [147,207,237, 0.7];
				cat2.color = [117,177,232, 0.7];
				cat3.color = [71,150,229, 0.7];
				cat4.color = [32,123,219, 0.7];
				cat5.color = [33,87,197, 0.7];
				cat6.color = [27,56,176, 0.7];
				cat7.color = [16,25,145, 0.7];
				dif1.color = [255,34,0, 0.7];
				dif2.color = [255,84,5, 0.7];
				dif3.color = [255,135,10,0.7];
				dif4.color = [255,185,15,0.7];
				dif5.color = [255,235,20,0.7];
				dif6.color = [255,255,255,0];
				dif6.outline.width=0;
				dif7.color = [164,196,0,0.7];
				dif8.color = [107,161,0,0.7];
				dif9.color = [60,128,0,0.7];
				renderer_E1B.field ="e1b_c_0";
				layerEscenari.renderer = renderer_E1B;
				renderer_E1B.field ="e1b_c_1";
				layerEscenariTendencial.renderer = renderer_E1B;
				renderer_max_E1B = {type: "class-breaks"};
				renderer_max_E1B.classBreakInfos = renderer_E1B.classBreakInfos;
				renderer_dif_E1B.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsE1B,[" + weightListIndicators + "]) - $feature.e1b_c_0;";
				renderer_max_E1B.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsE1B,[" + weightListIndicators + "]);";
				layer4.renderer = renderer_dif_E1B;
				layer3.renderer = renderer_max_E1B;
				renderer_dif_E1B.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsE1B,[" + weightListIndicators + "]) - $feature.e1b_c_1;";
				layerDiferenciaEscenariTendencial.renderer = renderer_dif_E1B;
				break;
			case "E1C": 
				cat1.color = [145,205,237, 0.7];
				cat2.color = [107,174,232, 0.7];
				cat3.color = [61,144,229, 0.7];
				cat4.color = [32,114,214, 0.7];
				cat5.color = [32,76,189, 0.7];
				cat6.color = [25,44,168, 0.7];
				cat7.color = [9,9,145, 0.7];
				dif1.color = [0,97,0, 0.7];
				dif2.color = [43,117,0, 0.7];
				dif3.color = [73,138,0,0.7];
				dif4.color = [103,158,0,0.7];
				dif5.color = [139,181,0,0.7];
				dif6.color = [176,207,0,0.7];
				dif7.color = [181,222,111,0.7];
				dif8.color = [255,255,255,0];
				dif8.outline.width=0;
				dif9.color = [255,229,90,0.7];
				dif10.color = [255,200,0,0.7];
				dif11.color = [255,166,0,0.7];
				dif12.color = [255,140,0,0.7];
				dif13.color = [255,111,0,0.7];
				dif14.color = [255,77,0,0.7];
				dif15.color = [255,38,0,0.7];
				renderer_E1C.field ="e1c_c_0";
				layerEscenari.renderer = renderer_E1C;
				renderer_E1C.field ="e1c_c_1";
				layerEscenariTendencial.renderer = renderer_E1C;
				renderer_max_E1C = {type: "class-breaks"};
				renderer_max_E1C.classBreakInfos = renderer_E1C.classBreakInfos;
				renderer_dif_E1C.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsE1C,[" + weightListIndicators + "]) - $feature.e1c_c_0;";
				renderer_max_E1C.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsE1C,[" + weightListIndicators + "]);";
				layer4.renderer = renderer_dif_E1C;
				layer3.renderer = renderer_max_E1C;
				renderer_dif_E1C.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsE1C,[" + weightListIndicators + "]) - $feature.e1c_c_1;";
				layerDiferenciaEscenariTendencial.renderer = renderer_dif_E1C;
				break;
			case "F": 
				cat1.color = [237,185,214, 0.7];
				cat2.color = [222,153,181, 0.7];
				cat3.color = [207,124,150, 0.7];
				cat4.color = [191,98,124, 0.7];
				cat5.color = [176,72,100, 0.7];
				cat6.color = [161,47,77, 0.7];
				cat7.color = [143,17,57, 0.7];
				cat8.color = [125,0,37, 0.7];
				dif1.color = [255,38,0, 0.7];
				dif2.color = [255,81,0, 0.7];
				dif3.color = [255,119,0, 0.7];
				dif4.color = [255,153,0, 0.7];
				dif5.color = [255,187,0, 0.7];
				dif6.color = [255,221,0, 0.7];
				dif7.color = [255,255,255, 0];
				dif7.outline.width=0;
				dif8.color = [180,224,0, 0.7];
				dif9.color = [154,206,0, 0.7];
				dif10.color = [121,188,0, 0.7];
				dif11.color = [103,170,0, 0.7];
				dif12.color = [77,151,0, 0.7];
				dif13.color = [73,138,0,0.7];
				dif14.color = [26,115,0,0.7];
				dif15.color = [0,97,0,0.7];
				renderer_F.field ="f1_c_0";
				layerEscenari.renderer = renderer_F;
				renderer_F.field ="f1_c_1";
				layerEscenariTendencial.renderer = renderer_F;
				renderer_max_F = {type: "class-breaks"};
				renderer_max_F.classBreakInfos = renderer_F.classBreakInfos;
				renderer_dif_F.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsF,[" + weightListIndicators + "]) - $feature.f1_c_0;";
				renderer_max_F.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsF,[" + weightListIndicators + "])";
				layer4.renderer = renderer_dif_F;
				layer3.renderer = renderer_max_F;
				renderer_dif_F.valueExpression= document.getElementById("arcadeB").text + " getValue(fieldsF,[" + weightListIndicators + "]) - $feature.f1_c_1;";
				layerDiferenciaEscenariTendencial.renderer = renderer_dif_F;
				break;
		}
		queryLayerViewStats(layer3,weightListIndicators);
	  }
				
		function getIndexMaxFeatureFields(feature, fields) 
		{
			var valorMax = -Infinity;
			var indexMax = -1;
			for(var k in fields) {
				if(feature.attributes[fields[k].value] >= valorMax) {
					valorMax = feature.attributes[fields[k].value];
					indexMax = k;
				}
			}
			return indexMax;
		}
		
		function getIndexMinFeatureFields(feature, fields) 
		{
			var valorMin = Infinity;
			var indexMin = -1;
			for(var k in fields) {
				if(feature.attributes[fields[k].value] <= valorMin) {
					valorMin = feature.attributes[fields[k].value];
					indexMin = k;
				}
			}
			return indexMin;
		}

		function queryLayerViewStats(capa,weightListIndicators) 
		{
			valorsA1_actual = [];
			valorsA1_tend = [];
			valorsA1_2_actual = [];
			valorsA1_2_tend = [];
			valorsA2_actual = [];
			valorsA2_tend = [];
			valorsA3_actual = [];
			valorsA3_tend = [];
			valorsA3_2_actual = [];
			valorsA3_2_tend = [];
			valorsB_actual = [];
			valorsB_tend = [];
			valorsC_actual = [];
			valorsC_tend = [];
			valorsD_actual = [];
			valorsD_tend = [];
			valorsD1 = [];
			valorsE1A1_actual = [];
			valorsE1A1_tend = [];
			valorsE1A2_actual = [];
			valorsE1A2_tend = [];
			valorsE1B_actual = [];
			valorsE1B_tend = [];
			valorsE1C_actual = [];
			valorsE1C_tend = [];
			valorsE1C1 = [];
			valorsF_actual = [];
			valorsF_tend = [];
			valorsF1 = [];
			valorsOptA1 = [];
			valorsOptA1_2 = [];
			valorsOptA2 = [];
			valorsOptA3 = [];
			valorsOptA3_2 = [];
			valorsOptB = [];
			valorsOptC = [];
			valorsOptD1 = [];
			valorsOptE1A1 = [];
			valorsOptE1A2 = [];
			valorsOptE1B = [];
			valorsOptE1C1 = [];
			valorsOptF1 = [];
			valorMaxA1 = 0;
			valorMaxA1_2 = 0;
			valorMaxA2 = 0;
			valorMaxA3 = 0;
			valorMaxA3_2 = 0;
			valorMaxB =0;
			valorMaxC = 0;
			valorMaxD = 0;
			valorMaxE1A1 = 0;
			valorMaxE1A2 = 0;
			valorMaxE1B = 0;
			valorMaxE1C = 0;
			valorMaxF = 0;
			capa.queryFeatures().then(function(response) {	
				 

				var indicatorsNames = ["A1", "A2", "A3", "B", "C", "D", "E1A", "E1B", "E1C", "F"];
				var indicatorsFields = [fieldsA1, fieldsA2, fieldsA3, fieldsB, fieldsC, fieldsD, fieldsE1A, fieldsE1B, fieldsE1C, fieldsF ];
				var indicatorsType = [ "max", "min", "min", "max", "max", "min", "max", "max", "max", "max" ];
				
				response.features.map(function(feature) {
					var valorA1 = 0;
					var valorA1_2 = 0;
					var valorA2 = 0;
					var valorA3 = 0;
					var valorA3_2 = 0;
					var valorB = 0;
					var valorC = 0;
					var valorD1 = 0;
					var valorE1A_1 = 0;
					var valorE1A_2 = 0;
					var valorE1B = 0;
					var valorE1C = 0;
					var valorF1 = 0;

					for(var i in indicatorsNames) {
						var k = 0;
						if (indicatorsType[i] == "min") {
							k = getIndexMinFeatureFields(feature, indicatorsFields[i]);
						} else {
							k = getIndexMaxFeatureFields(feature, indicatorsFields[i]);
						}
						
						valorA1 += feature.attributes[fieldsA1_agg[k].value] * weightListIndicators[i];
						valorA1_2 += feature.attributes[fieldsA1_2_agg[k].value] * weightListIndicators[i];
						valorA2 += feature.attributes[fieldsA2[k].value] * weightListIndicators[i];
						valorA3 += feature.attributes[fieldsA3_agg[k].value] * weightListIndicators[i];
						valorA3_2 += feature.attributes[fieldsA3_2_agg[k].value] * weightListIndicators[i];
						valorB += feature.attributes[fieldsB[k].value] * feature.attributes["AMB_100"] * weightListIndicators[i];
						valorC += feature.attributes[fieldsC[k].value] * feature.attributes["AMB_100"] * weightListIndicators[i];
						valorD1 += feature.attributes[fieldsD_agg[k].value] * weightListIndicators[i];
						valorE1A_1 += feature.attributes[fieldsE1A1_agg[k].value] * weightListIndicators[i];
						valorE1A_2 += feature.attributes[fieldsE1A2_agg[k].value] * weightListIndicators[i];
						valorE1B += feature.attributes[fieldsE1B[k].value] * weightListIndicators[i];
						valorE1C += feature.attributes[fieldsE1C_agg[k].value] * weightListIndicators[i];
						valorF1 += feature.attributes[fieldsF_agg[k].value] * weightListIndicators[i];
					}

					//Indicador A1
					valorsA1_actual.push(feature.attributes[fieldsA1_agg[0].value]);
					valorsA1_tend.push(feature.attributes[fieldsA1_agg[1].value]);
					valorsA1_2_actual.push(feature.attributes[fieldsA1_2_agg[0].value]);
					valorsA1_2_tend.push(feature.attributes[fieldsA1_2_agg[1].value]); 
					valorsOptA1.push(valorA1);
					valorsOptA1_2.push(valorA1_2);
					//Indicador A2
					valorsA2_actual.push(feature.attributes[fieldsA2_agg[0].value]);
					valorsA2_tend.push(feature.attributes[fieldsA2_agg[1].value]);
					valorsOptA2.push(valorA2);
					//Indicador A3
					valorsA3_actual.push(feature.attributes[fieldsA3_agg[0].value]);
					valorsA3_tend.push(feature.attributes[fieldsA3_agg[1].value]);
					valorsA3_2_actual.push(feature.attributes[fieldsA3_2_agg[0].value]);
					valorsA3_2_tend.push(feature.attributes[fieldsA3_2_agg[1].value]);
					valorsOptA3.push(valorA3);
					valorsOptA3_2.push(valorA3_2);
					//Indicador B
					valorsB_actual.push(feature.attributes[fieldsB[0].value]*feature.attributes["AMB_100"]);
					valorsB_tend.push(feature.attributes[fieldsB[1].value]*feature.attributes["AMB_100"]);
					valorsOptB.push(valorB);
					//Indicador C
					valorsC_actual.push(feature.attributes[fieldsC[0].value]*feature.attributes["AMB_100"]);
					valorsC_tend.push(feature.attributes[fieldsC[1].value]*feature.attributes["AMB_100"]);
					valorsOptC.push(valorC);
					//Indicador D
					valorsD_actual.push(feature.attributes[fieldsD_agg[0].value]);
					valorsD_tend.push(feature.attributes[fieldsD_agg[1].value]);
					valorsD1.push(feature.attributes[fieldsD_agg[1].value]);
					valorsOptD1.push(valorD1);
					//Indicador E1A
					valorsE1A1_actual.push(feature.attributes[fieldsE1A1_agg[0].value]);
					valorsE1A2_actual.push(feature.attributes[fieldsE1A2_agg[0].value]);
					valorsE1A1_tend.push(feature.attributes[fieldsE1A1_agg[1].value]);
					valorsE1A2_tend.push(feature.attributes[fieldsE1A2_agg[1].value]);
					valorsOptE1A1.push(valorE1A_1);
					valorsOptE1A2.push(valorE1A_2);
					//Indicador E1B	
					valorsE1B_actual.push(feature.attributes[fieldsE1B[0].value]);
					valorsE1B_tend.push(feature.attributes[fieldsE1B[1].value]);					
					valorsOptE1B.push(valorE1B);
					//Indicador E1C
					valorsE1C_actual.push(feature.attributes[fieldsE1C_agg[0].value]);
					valorsE1C_tend.push(feature.attributes[fieldsE1C_agg[1].value]);
					valorsE1C1.push(feature.attributes[fieldsE1C_agg[0].value]);
					valorsOptE1C1.push(valorE1C);
					//Indicador F
					valorsF_actual.push(feature.attributes[fieldsF_agg[0].value]);
					valorsF_tend.push(feature.attributes[fieldsF_agg[1].value]);
					valorsOptF1.push(valorF1);
				});
				
				valorsMaxA1=[];
				valorsMaxA1_2=[];

				valorsMinA2=[];
				
				valorsMinA3=[];
				valorsMinA3_2=[];
				
				valorsMaxB=[];
				
				valorsMaxC=[];
				
				valorsMinD1=[];
				
				valorsMaxE1A1=[];
				valorsMaxE1A2=[];
				
				valorsMaxE1B=[];
				
				valorsMaxE1C1=[];
				
				valorsMaxF1=[];
				
				response.features.map(function(feature) {
					//Calcul de maxims
					//indicador A1
					valorMaxA1A=0;
					for(var k in fieldsA1){
						if(feature.attributes[fieldsA1[k].value] >= valorMaxA1A){
							valorMaxA1A = feature.attributes[fieldsA1[k].value];
							valorMaxA1 = feature.attributes[fieldsA1_agg[k].value];
							valorMaxA1_2 = feature.attributes[fieldsA1_2_agg[k].value];
						}
					}
					valorsMaxA1.push(valorMaxA1);
					valorsMaxA1_2.push(valorMaxA1_2);
					
					//indicador A2					
					valorsMinA2.push(feature.attributes[fieldsA2[getIndexMinFeatureFields(feature, fieldsA2)].value]);

					
					//indicador A3
					valorsMinA3.push(feature.attributes[fieldsA3_agg[getIndexMinFeatureFields(feature, fieldsA3)].value]);
					valorsMinA3_2.push(feature.attributes[fieldsA3_2_agg[getIndexMinFeatureFields(feature, fieldsA3)].value]);

					//indicador B
					valorMaxB=0;
					for(var k in fieldsB){
						if(feature.attributes[fieldsB[k].value] >= valorMaxB){
							valorMaxB = feature.attributes[fieldsB[k].value];
						}
					}
					valorsMaxB.push(valorMaxB);
					//indicador C
					valorMaxC=0;
					for(var k in fieldsC){
						if(feature.attributes[fieldsC[k].value] >= valorMaxC){
							valorMaxC = feature.attributes[fieldsC[k].value];
						}
					}
					valorsMaxC.push(valorMaxC);
					
					//indicador D
					valorMinD1 = 1000000;
					for(var k in fieldsD){
						
						if(feature.attributes[fieldsD[k].value] <= valorMinD1){
							valorMin = feature.attributes[fieldsD[k].value];
							valorMinD1 = feature.attributes[fieldsD_agg[k].value];
						}
					}
					
					valorsMinD1.push(valorMinD1);
					
					//indicador E1A
					valorMaxE1A=0;
					for(var k in fieldsE1A){
						if(feature.attributes[fieldsE1A[k].value] >= valorMaxE1A){
							valorMaxE1A = feature.attributes[fieldsE1A[k].value];
							valorMaxE1A1 = feature.attributes[fieldsE1A1_agg[k].value];
							valorMaxE1A2 = feature.attributes[fieldsE1A2_agg[k].value];
						}
					}
					valorsMaxE1A1.push(valorMaxE1A1);
					valorsMaxE1A2.push(valorMaxE1A2);
					//indicador E1B
					valorMaxE1B=0;
					for(var k in fieldsE1B){
						if(feature.attributes[fieldsE1B[k].value] >= valorMaxE1B){
							valorMaxE1B = feature.attributes[fieldsE1B[k].value];
						}
					}
					valorsMaxE1B.push(valorMaxE1B);
					//indicador E1C
					valorMaxE1C=0;
					for(var k in fieldsE1C){
						if(feature.attributes[fieldsE1C[k].value] >= valorMaxE1C){
							valorMaxE1C = feature.attributes[fieldsE1C[k].value];
							valorMaxE1C1 = feature.attributes[fieldsE1C_agg[k].value];
						}
					}
					valorsMaxE1C1.push(valorMaxE1C1);
					//indicador F
					valorMaxF1=0;
					for(var k in fieldsF){
						if(feature.attributes[fieldsF[k].value] >= valorMaxF1){
							valorMaxF1 = feature.attributes[fieldsF_agg[k].value];
						}
					}
					valorsMaxF1.push(valorMaxF1);
				});
				arrMax = arr => Math.max(...arr);
				arrMin = arr => Math.min(...arr);
				arrSum = arr => arr.reduce((a,b) => a + b, 0);
				arrAvg = arr => arr.reduce((a,b) => a + b, 0) / arr.length;

				
				let indicatorA1Obj = new MaxSumMultipleIndicator(valorsMaxA1, valorsMaxA1_2, valorsA1_actual, valorsA1_2_actual, valorsA1_tend, valorsA1_2_tend, valorsOptA1, valorsOptA1_2);
				let indicatorA2Obj = new MinSumIndicator(valorsMinA2, valorsA2_actual, valorsA2_tend, valorsOptA2);
				let indicatorA3Obj = new MinSumMultipleIndicator(valorsMinA3, valorsMinA3_2, valorsA3_actual, valorsA3_2_actual, valorsA3_tend, valorsA3_2_tend, valorsOptA3, valorsOptA3_2);
				let indicatorBObj = new MaxAvgIndicator(valorsMaxB, valorsB_actual, valorsB_tend, valorsOptB);
				let indicatorCObj = new MaxAvgIndicator(valorsMaxC, valorsC_actual, valorsC_tend, valorsOptC);
				let indicatorDObj = new MinSumIndicator(valorsMinD1, valorsD_actual, valorsD_tend, valorsOptD1);
				let indicatorE1AObj = new MaxSumMultipleIndicator(valorsMaxE1A1, valorsMaxE1A2, valorsE1A1_actual, valorsE1A2_actual, valorsE1A1_tend, valorsE1A2_tend, valorsOptE1A1, valorsOptE1A2);
				let indicatorE1BObj = new MaxSumIndicator(valorsMaxE1B, valorsE1B_actual, valorsE1B_tend, valorsOptE1B);
				let indicatorE1CObj = new MaxSumIndicator(valorsMaxE1C1, valorsE1C_actual, valorsE1C_tend, valorsOptE1C1);
				let indicatorFObj = new MaxSumIndicator(valorsMaxF1, valorsF_actual, valorsF_tend, valorsOptF1);

				/*
				// Escenari optimitzat
				indicador_A1_max = ((arrSum(valorsOptA1)  / arrSum(valorsOptA1_2))) / (arrSum(valorsMaxA1)/ arrSum(valorsMaxA1_2));
				indicador_A2_max = (arrSum(valorsMinA2)) / (arrSum(valorsOptA2));
				indicador_A3_max = ((arrSum(valorsMinA3)/ arrSum(valorsMinA3_2))/ (arrSum(valorsOptA3) / arrSum(valorsOptA3_2)));
				indicador_B_max = (arrAvg(valorsOptB)) / arrAvg(valorsMaxB);
				indicador_C_max = (arrAvg(valorsOptC)) / arrAvg(valorsMaxC);
				indicador_D_max =  (arrSum(valorsMinD1) / Math.pow(10,6)) / ((arrSum(valorsOptD1) / Math.pow(10,6)));
				indicador_E1A_max = ((arrSum(valorsOptE1A1) / arrSum(valorsOptE1A2)) * 100) / ((arrSum(valorsMaxE1A1) / arrSum(valorsMaxE1A2)) * 100);
				indicador_E1B_max = ((arrSum(valorsOptE1B)) / 1000) / (arrSum(valorsMaxE1B) / 1000);
				indicador_E1C_max = ((arrSum(valorsOptE1C1)) / 1000) / (arrSum(valorsMaxE1C1) / 1000);
				indicador_F_max = (arrSum(valorsOptF1)) / arrSum(valorsMaxF1);
				
				if (escenari == 0) {
					// Escenari actual
					indicador_A1 = (arrSum(valorsA1_actual) / arrSum(valorsA1_2_actual)) / (arrSum(valorsMaxA1)/ arrSum(valorsMaxA1_2));
					indicador_A2 = (arrSum(valorsMinA2)/ 1000000) / (arrSum(valorsA2_actual) / 1000000);
					indicador_A3 = (arrSum(valorsMinA3)/ arrSum(valorsMinA3_2))/ (arrSum(valorsA3_actual) / arrSum(valorsA3_2_actual));
					indicador_B = arrAvg(valorsB_actual) / arrAvg(valorsMaxB);
					indicador_C = arrAvg(valorsC_actual) / arrAvg(valorsMaxC);
					indicador_D = (arrSum(valorsMinD1) / Math.pow(10,6)) / (arrSum(valorsD_actual) / Math.pow(10,6))  ;
					indicador_E1A = ((arrSum(valorsE1A1_actual) / arrSum(valorsE1A2_actual)) * 100) / ((arrSum(valorsMaxE1A1) / arrSum(valorsMaxE1A2)) * 100);
					indicador_E1B = (arrSum(valorsE1B_actual) / 1000) / (arrSum(valorsMaxE1B) / 1000);
					indicador_E1C = (arrSum(valorsE1C_actual) / 1000) / (arrSum(valorsMaxE1C1) / 1000);
					indicador_F = arrSum(valorsF_actual) / arrSum(valorsMaxF1);
					
					aranya2(indicador_A1 , indicador_A2, indicador_A3,indicador_B,indicador_C,indicador_D,indicador_E1A,indicador_E1B,indicador_E1C,indicador_F,"rgba(200,0,0,0.6)","Escenari actual");
					
				} else {
					// Escenari tendencial
					indicador_A1 = (arrSum(valorsA1_tend) / arrSum(valorsA1_2_tend)) / (arrSum(valorsMaxA1)/ arrSum(valorsMaxA1_2));
					indicador_A2 = (arrSum(valorsMinA2)/ 1000000) / (arrSum(valorsA2_tend) / 1000000);
					indicador_A3 = (arrSum(valorsMinA3)/ arrSum(valorsMinA3_2))/ (arrSum(valorsA3_tend) / arrSum(valorsA3_2_tend));
					indicador_B = arrAvg(valorsB_tend) / arrAvg(valorsMaxB);
					indicador_C = arrAvg(valorsC_tend) / arrAvg(valorsMaxC);
					indicador_D = (arrSum(valorsMinD1) / Math.pow(10,6)) / (arrSum(valorsD_tend) / Math.pow(10,6));
					indicador_E1A = ((arrSum(valorsE1A1_tend) / arrSum(valorsE1A2_tend)) * 100) / ((arrSum(valorsMaxE1A1) / arrSum(valorsMaxE1A2)) * 100);
					indicador_E1B = (arrSum(valorsE1B_tend) / 1000) / (arrSum(valorsMaxE1B) / 1000);
					indicador_E1C = (arrSum(valorsE1C_tend) / 1000) / (arrSum(valorsMaxE1C1) / 1000);
					indicador_F = arrSum(valorsF_tend) / arrSum(valorsMaxF1);
					
					aranya2(indicador_A1,indicador_A2,indicador_A3,indicador_B,indicador_C,indicador_D,indicador_E1A,indicador_E1B,indicador_E1C,indicador_F,"rgba(200,0,0,0.6)","Escenari tendencial");
				}*/
				var categories = ["Eficiència energètica (A1A)", "Consum d’aigua (A1B)","Apropiació de biomassa (A1C)","Conservació de la biodiversitat (B1)", "Funcionament del paisatge (C1)", "Canvi climàtic (D1)", "Recirculació de nutrients (E1A)", "Estoc de carboni (E1B)","Producció agrícola (E1C)","Llocs de treball (F1)"];
				var data = [indicatorA1Obj, indicatorA2Obj, indicatorA3Obj, indicatorBObj, indicatorCObj, indicatorDObj, indicatorE1AObj, indicatorE1BObj, indicatorE1CObj, indicatorFObj];
				var units = ["", "hm3", "% de HANPP", "", "", "milers de tones de CO2 eq", "% de recirculació de fòsfor", "milers de tones de carboni", "milers de tones de matèria seca", "UTAs"];
				histogramChart(categories, data, units);
				aranya(categories, data);
			});
		}
		
		function aranya(categories, data)
		{
			var ctx = document.getElementById("marksChart");
			var chart = new Chart(ctx, {
				type: 'radar',
				data: {
					labels: categories,
					datasets: [{
						data: data.map(function (indicator) {
							return indicator.actualRelativeValue();
						}),
						label: "Escenari actual",
						borderWidth: 1,
						borderColor: '#3377FF',
						fill: false
					},
					{
						data: data.map(function (indicator) {
							return indicator.tendentialRelativeValue();
						}),
						label: "Escenari tendencial",
						borderWidth: 1,
						borderColor: '#FF3333',
						fill: false
					},
					{
						data: data.map(function (indicator) {
							return indicator.optimitzationRelativeValue();
						}),
						label: "Escenari optimitzat",
						borderWidth: 1,
						borderColor: '#00FF00',
						fill: false
					}]
				},
				options: {
					legend: {
						position: 'bottom'
					},
					tooltips: {
						callbacks: {
							title: function(tooltipItems, data) {
								return data.datasets[tooltipItems[0].datasetIndex].label;
							},
							label: function(tooltipItem, data) {
								return tooltipItem.yLabel.toFixed(2);
							}
						}
					}
				}
			});
			chart.update();
		}
		/*
		function aranya2(indicador_A1 ,indicador_A2 ,indicador_A3 ,indicador_B,indicador_C,indicador_D,indicador_E1A,indicador_E1B,indicador_E1C,indicador_F,color,titol){
			var options = {
				chart: {
					height: 350,
					type: 'radar',
				},
				series: [{
					name: titol,
					data: [indicador_A1 ,indicador_A2 ,indicador_A3 ,indicador_B,indicador_C,indicador_D,indicador_E1A,indicador_E1B,indicador_E1C,indicador_F],
				},{
					name: "Escenari optimitzat",
					data: [indicador_A1_max ,indicador_A2_max ,indicador_A3_max ,indicador_B_max,indicador_C_max,indicador_D_max,indicador_E1A_max,indicador_E1B_max,indicador_E1C_max,indicador_F_max],
				}],
				labels:  ["Eficiència energètica (A1A)", "Consum d’aigua (A1B)","Apropiació de biomassa (A1C)","Conservació de la biodiversitat (B1)", "Funcionament del paisatge (C1)", "Canvi climàtic (D1)", "Recirculació de nutrients (E1A)", "Estoc de carboni (E1B)","Producció agrícola (E1C)","Llocs de treball (F1)"],
				plotOptions: {
					radar: {
						size: 140,
						polygons: {
							strokeColor: '#e9e9e9',
							fill: {
								colors: []
							}
						}
					}
				},
				
				colors: ['#AAAAAA','#00FF00'],
				fill:{type: 'gsolid',opacity:0 },
				stroke: {
					  show: true,
					  width: 2,
					  colors: ['#AAAAAA','#00FF00'],
					  dashArray: 0
					}
				  ,
				markers: {
					size: 2,
					strokeColors: ['#AAAAAA','#00FF00'],
					strokeWidth: 2,
				},
				tooltip: {
					y: {
						formatter: function(val) {
							return val.toFixed(2);
						}   
					}
				},
				yaxis: {
					tickAmount: 10,
					min:0,
					max:1,
					decimalsInFloat: 3,
					forceNiceScale: false,
					labels: {
						formatter: function(val, i) {
							if(i % 2 === 0) {
								return val.toFixed(1);
							} else {
								return ''
							}
						}
					}
				}
			}
			document.getElementById("marksChart").innerHTML = "<div id='marksChart'></div>";
			chart = new ApexCharts(
				document.querySelector("#marksChart"),
				options
			);

			chart.render();
		}*/

		function histogramChart(categories, data, units) {
			var ctx = document.getElementById("histoChart");
			var chart = new Chart(ctx, {
				type: 'bar',
				data: {
					labels: categories,
					datasets: [{
						data: data.map(function (indicator) {
							return indicator.actualHistogramValue();
						}),
						label: "Escenari actual",
						borderWidth: 1,
						backgroundColor: '#3377FF',
						indicatorsValues: data.map(function (indicator) {
							return indicator.actualAbsoluteValue();
						})
					},
					{
						data: data.map(function (indicator) {
							return indicator.tendencialHistogramValue();
						}),
						label: "Escenari tendencial",
						borderWidth: 1,
						backgroundColor: '#FF3333',
						indicatorsValues: data.map(function (indicator) {
							return indicator.tendencialAbsoluteValue();
						})
					},
					{
						data: data.map(function (indicator) {
							return indicator.optimitzationHistogramValue();
						}),
						label: "Escenari optimitzat",
						borderWidth: 1,
						backgroundColor: '#00FF00',
						indicatorsValues: data.map(function (indicator) {
							return indicator.optimitzationAbsoluteValue();
						}) 
					}]
				},
				options: {
					tooltips: {
						position: 'nearest',
						callbacks: {
							title: function(tooltipItems, data) {
								return data.datasets[tooltipItems[0].datasetIndex].label;
							},
							label: function(tooltipItem, data) {
								return categories[tooltipItem.index] + ": " + data.datasets[tooltipItem.datasetIndex].indicatorsValues[tooltipItem.index].toFixed(2) + " " + units[tooltipItem.index];
							}
						}
					},
					legend: {
						position: 'bottom'
					}
				}
			});
			chart.update();
		}

			function popup(id){
				var div = document.getElementById(id);
				div.classList.add("popup");

			}
			function closePopup(id){
				var div = document.getElementById(id);
				div.classList.remove("popup");
				
			}